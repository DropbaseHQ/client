var Vt=Object.defineProperty;var Pt=(o,e,t)=>e in o?Vt(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var ge=(o,e,t)=>(Pt(o,typeof e!="symbol"?e+"":e,t),t);import{av as c,dD as G,a8 as Ut,fF as Ht,af as se,bY as Kt,bf as qt,aZ as Gt,ai as z,aT as ie,aD as fe,uc as Wt,aX as jt,aO as Ze,cV as et,ak as Ge,ud as zt,d6 as be,aC as Xt,aM as Jt,ab as Yt,aa as We,a9 as $t,bG as Qt,bw as h,bx as l,ia as tt,hV as Zt,aY as ei,cT as ti,eS as ii,b8 as Re,c6 as ue,ej as ni,d_ as si,cm as X,hJ as oi,cb as it,e$ as N,f0 as M,f1 as S,bH as B,iK as le,hX as je,aR as F,kW as ai,hx as f,jh as ri,oJ as ze,oY as ci,ah as di,oI as ui,ag as li,hR as V,jF as Be,bJ as nt,by as he,hI as Fe,kB as st,hQ as ot,ea as at,hw as hi,hz as pi,ek as J,ca as gi,b6 as rt,jo as Te,jj as fi,iC as bi,ex as v,se as mi,eL as ki,cK as ct,hL as dt,eH as we,kp as I,bu as ut,tn as Si,js as Y,dK as Me,db as vi}from"./vendor-332432be.js";import{jl as q,ay as lt,aD as ht,iP as Ii,ek as Ci,_ as $,h as k,I as Bi,iN as wi,iB as g,af as R,x as Di,N as yi,jM as Q,iG as W,nb as L,jc as De,ja as Z,jr as Ve,nc as Pe,jo as Ei,ds as xi,nd as pt,ne as ye,jq as _i,c7 as Ue,jg as oe,jd as Ee,iZ as Ti,jS as gt,j8 as ee,iY as Ai,iW as ft,jV as bt,jD as Ni,iT as Oi,am as Li}from"./index-5b71d1bd.js";const Ae=c("unknownSource","Unknown Source");class Rn{constructor(e,t,i,n){let s;e?(this.raw=e,s=this.raw.path||this.raw.name||"",this.available=!0):(this.raw={name:Ae},this.available=!1,s=`${q}:${Ae}`),this.uri=mt(this.raw,s,t,i,n)}get name(){return this.raw.name||G(this.uri)}get origin(){return this.raw.origin}get presentationHint(){return this.raw.presentationHint}get reference(){return this.raw.sourceReference}get inMemory(){return this.uri.scheme===q}openInEditor(e,t,i,n,s){return this.available?e.openEditor({resource:this.uri,description:this.origin,options:{preserveFocus:i,selection:t,revealIfOpened:!0,selectionRevealType:1,pinned:s}},n?lt:ht):Promise.resolve(void 0)}static getEncodedDebugData(e){let t,i,n;switch(e.scheme){case Ut.file:t=Ht(e.fsPath);break;case q:if(t=e.path,e.query){const s=e.query.split("&");for(const a of s){const r=a.split("=");if(r.length===2)switch(r[0]){case"session":n=r[1];break;case"ref":i=parseInt(r[1]);break}}}break;default:t=e.toString();break}return{name:G(e),path:t,sourceReference:i,sessionId:n}}}function mt(o,e,t,i,n){const s=a=>typeof o.sourceReference=="number"&&o.sourceReference>0?se.from({scheme:q,path:a,query:`session=${t}&ref=${o.sourceReference}`}):a&&Ii(a)?i.asCanonicalUri(se.parse(a)):a&&Kt(a)?i.asCanonicalUri(se.file(a)):i.asCanonicalUri(se.from({scheme:q,path:a,query:`session=${t}`}));try{return s(e)}catch{return n.error("Invalid path from debug adapter: "+e),s("/invalidDebugSource")}}class T extends Ci{constructor(){super(...arguments),this.resource=void 0}get typeId(){return T.ID}static get instance(){return(!T._instance||T._instance.isDisposed())&&(T._instance=new T),T._instance}getName(){return c("disassemblyInputName","Disassembly")}matches(e){return e instanceof T}}T.ID="debug.disassemblyView.input";class w{constructor(e,t,i,n,s=0,a=0,r=void 0,d=0,u=void 0){this.session=e,this.threadId=t,this._reference=i,this.id=n,this.namedVariables=s,this.indexedVariables=a,this.memoryReference=r,this.startOfVariables=d,this.presentationHint=u,this.valueChanged=!1,this._value=""}get reference(){return this._reference}set reference(e){this._reference=e,this.children=void 0}async evaluateLazy(){if(typeof this.reference>"u")return;const e=await this.session.variables(this.reference,this.threadId,void 0,void 0,void 0);if(!e||!e.body||!e.body.variables||e.body.variables.length!==1)return;const t=e.body.variables[0];this.reference=t.variablesReference,this._value=t.value,this.namedVariables=t.namedVariables,this.indexedVariables=t.indexedVariables,this.memoryReference=t.memoryReference,this.presentationHint=t.presentationHint,this.adoptLazyResponse(t)}adoptLazyResponse(e){}getChildren(){return this.children||(this.children=this.doGetChildren()),this.children}async doGetChildren(){if(!this.hasChildren)return[];if(!this.getChildrenInChunks)return this.fetchVariables(void 0,void 0,void 0);const e=this.namedVariables?await this.fetchVariables(void 0,void 0,"named"):[];let t=w.BASE_CHUNK_SIZE;for(;this.indexedVariables&&this.indexedVariables>t*w.BASE_CHUNK_SIZE;)t*=w.BASE_CHUNK_SIZE;if(this.indexedVariables&&this.indexedVariables>t){const n=Math.ceil(this.indexedVariables/t);for(let s=0;s<n;s++){const a=(this.startOfVariables||0)+s*t,r=Math.min(t,this.indexedVariables-s*t);e.push(new K(this.session,this.threadId,this,this.reference,`[${a}..${a+r-1}]`,"","",void 0,r,void 0,{kind:"virtual"},void 0,void 0,!0,a))}return e}const i=await this.fetchVariables(this.startOfVariables,this.indexedVariables,"indexed");return e.concat(i)}getId(){return this.id}getSession(){return this.session}get value(){return this._value}get hasChildren(){var e;return!!this.reference&&this.reference>0&&!((e=this.presentationHint)!=null&&e.lazy)}async fetchVariables(e,t,i){try{const n=await this.session.variables(this.reference||0,this.threadId,i,e,t);if(!n||!n.body||!n.body.variables)return[];const s=new Map,a=n.body.variables.filter(r=>!!r).map(r=>{if(Ge(r.value)&&Ge(r.name)&&typeof r.variablesReference=="number"){const d=s.get(r.name)||0,u=d>0?d.toString():"";return s.set(r.name,d+1),new K(this.session,this.threadId,this,r.variablesReference,r.name,r.evaluateName,r.value,r.namedVariables,r.indexedVariables,r.memoryReference,r.presentationHint,r.type,r.__vscodeVariableMenuContext,!0,0,u)}return new K(this.session,this.threadId,this,0,"",void 0,c("invalidVariableAttributes","Invalid variable attributes"),0,0,void 0,{kind:"virtual"},void 0,void 0,!1)});return this.session.autoExpandLazyVariables&&await Promise.all(a.map(r=>{var d;return((d=r.presentationHint)==null?void 0:d.lazy)&&r.evaluateLazy()})),a}catch(n){return[new K(this.session,this.threadId,this,0,"",void 0,n.message,0,0,void 0,{kind:"virtual"},void 0,void 0,!1)]}}get getChildrenInChunks(){return!!this.indexedVariables}set value(e){this._value=e,this.valueChanged=!!w.allValues.get(this.getId())&&w.allValues.get(this.getId())!==D.DEFAULT_VALUE&&w.allValues.get(this.getId())!==e,w.allValues.set(this.getId(),e)}toString(){return this.value}async evaluateExpression(e,t,i,n,s=!1){var a;if(!t||!i&&n!=="repl")return this.value=n==="repl"?c("startDebugFirst","Please start a debug session to evaluate expressions"):D.DEFAULT_VALUE,this.reference=0,!1;this.session=t;try{const r=await t.evaluate(e,i?i.frameId:void 0,n);return r&&r.body?(this.value=r.body.result||"",this.reference=r.body.variablesReference,this.namedVariables=r.body.namedVariables,this.indexedVariables=r.body.indexedVariables,this.memoryReference=r.body.memoryReference,this.type=r.body.type||this.type,this.presentationHint=r.body.presentationHint,!s&&((a=r.body.presentationHint)!=null&&a.lazy)&&await this.evaluateLazy(),!0):!1}catch(r){return this.value=r.message||"",this.reference=0,!1}}}w.allValues=new Map;w.BASE_CHUNK_SIZE=100;function Ne(o,e){e&&e.body&&(o.value=e.body.value||"",o.type=e.body.type||o.type,o.reference=e.body.variablesReference,o.namedVariables=e.body.namedVariables,o.indexedVariables=e.body.indexedVariables)}class D extends w{constructor(e,t=z()){super(void 0,void 0,0,t),this.name=e,this.available=!1,e&&(this.value=D.DEFAULT_VALUE)}async evaluate(e,t,i,n){this.available=await this.evaluateExpression(this.name,e,t,i,n)}toString(){return`${this.name}
${this.value}`}async setExpression(e,t){if(!this.session)return;const i=await this.session.setExpression(t.frameId,this.name,e);Ne(this,i)}}D.DEFAULT_VALUE=c("notAvailable","not available");class K extends w{constructor(e,t,i,n,s,a,r,d,u,p,b,C=void 0,_=void 0,U=!0,H=0,_e=""){super(e,t,n,`variable:${i.getId()}:${s}:${_e}`,d,u,p,H,b),this.parent=i,this.name=s,this.evaluateName=a,this.variableMenuContext=_,this.available=U,this.value=r||"",this.type=C}async setVariable(e,t){if(this.session)try{if(this.session.capabilities.supportsSetExpression&&!this.session.capabilities.supportsSetVariable&&this.evaluateName)return this.setExpression(e,t);const i=await this.session.setVariable(this.parent.reference,this.name,e);Ne(this,i)}catch(i){this.errorMessage=i.message}}async setExpression(e,t){if(!this.session||!this.evaluateName)return;const i=await this.session.setExpression(t.frameId,this.evaluateName,e);Ne(this,i)}toString(){return this.name?`${this.name}: ${this.value}`:this.value}adoptLazyResponse(e){this.evaluateName=e.evaluateName}toDebugProtocolObject(){return{name:this.name,variablesReference:this.reference||0,memoryReference:this.memoryReference,value:this.value,evaluateName:this.evaluateName}}}class kt extends w{constructor(e,t,i,n,s,a,r,d){super(e.thread.session,e.thread.threadId,n,`scope:${i}:${t}`,a,r),this.name=i,this.expensive=s,this.range=d}toString(){return this.name}toDebugProtocolObject(){return{name:this.name,variablesReference:this.reference||0,expensive:this.expensive}}}class Ri extends kt{constructor(e,t,i){super(e,t,i,0,!1)}toString(){return this.name}}class Fi{constructor(e,t,i,n,s,a,r,d,u){this.thread=e,this.frameId=t,this.source=i,this.name=n,this.presentationHint=s,this.range=a,this.index=r,this.canRestart=d,this.instructionPointerReference=u}getId(){return`stackframe:${this.thread.getId()}:${this.index}:${this.source.name}`}getScopes(){return this.scopes||(this.scopes=this.thread.session.scopes(this.frameId,this.thread.threadId).then(e=>{if(!e||!e.body||!e.body.scopes)return[];const t=new Set;return e.body.scopes.map(i=>{let n=0;do n=zt(`${i.name}:${i.line}:${i.column}`,n);while(t.has(n));return t.add(n),new kt(this,n,i.name,i.variablesReference,i.expensive,i.namedVariables,i.indexedVariables,i.line&&i.column&&i.endLine&&i.endColumn?new be(i.line,i.column,i.endLine,i.endColumn):void 0)})},e=>[new Ri(this,0,e.message)])),this.scopes}async getMostSpecificScopes(e){const i=(await this.getScopes()).filter(a=>!a.expensive);if(!i.some(a=>!!a.range))return i;const s=i.filter(a=>a.range&&be.containsRange(a.range,e)).sort((a,r)=>a.range.endLineNumber-a.range.startLineNumber-(r.range.endLineNumber-r.range.startLineNumber));return s.length?s:i}restart(){return this.thread.session.restartFrame(this.frameId,this.thread.threadId)}forgetScopes(){this.scopes=void 0}toString(){const e=typeof this.range.startLineNumber=="number"?`:${this.range.startLineNumber}`:"",t=`${this.source.inMemory?this.source.name:this.source.uri.fsPath}${e}`;return t===Ae?this.name:`${this.name} (${t})`}async openInEditor(e,t,i,n){var a;const s=(a=this.thread.stoppedDetails)==null?void 0:a.reason;if(this.instructionPointerReference&&(s==="instruction breakpoint"||s==="step"&&this.thread.lastSteppingGranularity==="instruction"))return e.openEditor(T.instance,{pinned:!0});if(this.source.available)return this.source.openInEditor(e,this.range,t,i,n)}equals(e){return this.name===e.name&&e.thread===this.thread&&this.frameId===e.frameId&&e.source===this.source&&be.equalsRange(this.range,e.range)}}class Fn{constructor(e,t,i){this.session=e,this.name=t,this.threadId=i,this.callStackCancellationTokens=[],this.reachedEndOfCallStack=!1,this.callStack=[],this.staleCallStack=[],this.stopped=!1}getId(){return`thread:${this.session.getId()}:${this.threadId}`}clearCallStack(){this.callStack.length&&(this.staleCallStack=this.callStack),this.callStack=[],this.callStackCancellationTokens.forEach(e=>e.dispose(!0)),this.callStackCancellationTokens=[]}getCallStack(){return this.callStack}getStaleCallStack(){return this.staleCallStack}getTopStackFrame(){return this.getCallStack().find(i=>{var n,s;return!!(i&&(((n=this.stoppedDetails)==null?void 0:n.reason)==="instruction breakpoint"||((s=this.stoppedDetails)==null?void 0:s.reason)==="step"&&this.lastSteppingGranularity==="instruction")&&i.instructionPointerReference||i.source&&i.source.available&&i.source.presentationHint!=="deemphasize")})}get stateLabel(){return this.stoppedDetails?this.stoppedDetails.description||(this.stoppedDetails.reason?c({key:"pausedOn",comment:["indicates reason for program being paused"]},"Paused on {0}",this.stoppedDetails.reason):c("paused","Paused")):c({key:"running",comment:["indicates state"]},"Running")}async fetchCallStack(e=20){var t;if(this.stopped){const i=this.callStack.length,n=await this.getCallStackImpl(i,e);this.reachedEndOfCallStack=n.length<e,i<this.callStack.length&&this.callStack.splice(i,this.callStack.length-i),this.callStack=this.callStack.concat(n||[]),typeof((t=this.stoppedDetails)==null?void 0:t.totalFrames)=="number"&&this.stoppedDetails.totalFrames===this.callStack.length&&(this.reachedEndOfCallStack=!0)}}async getCallStackImpl(e,t){try{const i=new Xt;this.callStackCancellationTokens.push(i);const n=await this.session.stackTrace(this.threadId,e,t,i.token);return!n||!n.body||i.token.isCancellationRequested?[]:(this.stoppedDetails&&(this.stoppedDetails.totalFrames=n.body.totalFrames),n.body.stackFrames.map((s,a)=>{const r=this.session.getSource(s.source);return new Fi(this,s.id,r,s.name,s.presentationHint,new be(s.line,s.column,s.endLine||s.line,s.endColumn||s.column),e+a,typeof s.canRestart=="boolean"?s.canRestart:!0,s.instructionPointerReference)}))}catch(i){return this.stoppedDetails&&(this.stoppedDetails.framesErrorMessage=i.message),[]}}get exceptionInfo(){return this.stoppedDetails&&this.stoppedDetails.reason==="exception"?this.session.capabilities.supportsExceptionInfoRequest?this.session.exceptionInfo(this.threadId):Promise.resolve({description:this.stoppedDetails.text,breakMode:null}):Promise.resolve(void 0)}next(e){return this.session.next(this.threadId,e)}stepIn(e){return this.session.stepIn(this.threadId,void 0,e)}stepOut(e){return this.session.stepOut(this.threadId,e)}stepBack(e){return this.session.stepBack(this.threadId,e)}continue(){return this.session.continue(this.threadId)}pause(){return this.session.pause(this.threadId)}terminate(){return this.session.terminateThreads([this.threadId])}reverseContinue(){return this.session.reverseContinue(this.threadId)}}const Mn=(o,e,t,i="memory")=>se.from({scheme:wi,authority:o,path:"/"+encodeURIComponent(e)+`/${encodeURIComponent(i)}.bin`,query:t?`?range=${t.fromOffset}:${t.toOffset}`:void 0});class Vn extends Jt{constructor(e,t){super(),this.memoryReference=e,this.session=t,this.invalidateEmitter=this._register(new fe),this.onDidInvalidate=this.invalidateEmitter.event,this.writable=!!this.session.capabilities.supportsWriteMemoryRequest,this._register(t.onDidInvalidateMemory(i=>{i.body.memoryReference===e&&this.invalidate(i.body.offset,i.body.count-i.body.offset)}))}async read(e,t){var u;const i=t-e,n=e,s=await this.session.readMemory(this.memoryReference,n,i);if(s===void 0||!((u=s.body)!=null&&u.data))return[{type:1,offset:n,length:i}];let a;try{a=Yt(s.body.data)}catch{return[{type:2,offset:n,length:i,error:"Invalid base64 data from debug adapter"}]}const r=s.body.unreadableBytes||0,d=i-r;if(a.byteLength<d){const p=We.alloc(d-a.byteLength);p.buffer.fill(0),a=We.concat([a,p],d)}else a.byteLength>d&&(a=a.slice(0,d));return r?[{type:0,offset:n,length:d,data:a},{type:1,offset:n+d,length:r}]:[{type:0,offset:n,length:i,data:a}]}async write(e,t){var s;const i=await this.session.writeMemory(this.memoryReference,e,$t(t),!0),n=((s=i==null?void 0:i.body)==null?void 0:s.bytesWritten)??t.byteLength;return this.invalidate(e,e+n),n}dispose(){super.dispose()}invalidate(e,t){this.invalidateEmitter.fire({fromOffset:e,toOffset:t})}}class Mi{constructor(e,t){this.enabled=e,this.id=t}getId(){return this.id}}function ne(o,e){return Qt({supportsConditionalBreakpoints:!!e.supportsConditionalBreakpoints,supportsHitConditionalBreakpoints:!!e.supportsHitConditionalBreakpoints,supportsLogPoints:!!e.supportsLogPoints,supportsFunctionBreakpoints:!!e.supportsFunctionBreakpoints,supportsDataBreakpoints:!!e.supportsDataBreakpoints,supportsInstructionBreakpoints:!!e.supportsInstructionBreakpoints},o)}class pe extends Mi{constructor(e,t,i,n,s){super(e,s),this.hitCondition=t,this.condition=i,this.logMessage=n,this.sessionData=new Map,e===void 0&&(this.enabled=!0)}setSessionData(e,t){t?(t.sessionId=e,this.sessionData.set(e,t)):this.sessionData.delete(e);const i=Array.from(this.sessionData.values()),n=et(i.filter(s=>s.verified),s=>`${s.line}:${s.column}`);n.length?this.data=n.length===1?n[0]:void 0:this.data=i.length?i[0]:void 0}get message(){if(this.data)return this.data.message}get verified(){return this.data?this.data.verified:!0}get sessionsThatVerified(){const e=[];for(const[t,i]of this.sessionData)i.verified&&e.push(t);return e}getIdFromAdapter(e){const t=this.sessionData.get(e);return t?t.id:void 0}getDebugProtocolBreakpoint(e){const t=this.sessionData.get(e);if(t)return{id:t.id,verified:t.verified,message:t.message,source:t.source,line:t.line,column:t.column,endLine:t.endLine,endColumn:t.endColumn,instructionReference:t.instructionReference,offset:t.offset}}toJSON(){const e=Object.create(null);return e.id=this.getId(),e.enabled=this.enabled,e.condition=this.condition,e.hitCondition=this.hitCondition,e.logMessage=this.logMessage,e}}class y extends pe{constructor(e,t,i,n,s,a,r,d,u,p,b,C=z()){super(n,a,s,r,C),this._uri=e,this._lineNumber=t,this._column=i,this._adapterData=d,this.textFileService=u,this.uriIdentityService=p,this.logService=b}get originalUri(){return this._uri}get lineNumber(){return this.verified&&this.data&&typeof this.data.line=="number"?this.data.line:this._lineNumber}get verified(){return this.data?this.data.verified&&!this.textFileService.isDirty(this._uri):!0}get uri(){return this.verified&&this.data&&this.data.source?mt(this.data.source,this.data.source.path,this.data.sessionId,this.uriIdentityService,this.logService):this._uri}get column(){return this.verified&&this.data&&typeof this.data.column=="number"?this.data.column:this._column}get message(){return this.textFileService.isDirty(this.uri)?c("breakpointDirtydHover","Unverified breakpoint. File is modified, please restart debug session."):super.message}get adapterData(){return this.data&&this.data.source&&this.data.source.adapterData?this.data.source.adapterData:this._adapterData}get endLineNumber(){return this.verified&&this.data?this.data.endLine:void 0}get endColumn(){return this.verified&&this.data?this.data.endColumn:void 0}get sessionAgnosticData(){return{lineNumber:this._lineNumber,column:this._column}}get supported(){return this.data?!(this.logMessage&&!this.data.supportsLogPoints||this.condition&&!this.data.supportsConditionalBreakpoints||this.hitCondition&&!this.data.supportsHitConditionalBreakpoints):!0}setSessionData(e,t){super.setSessionData(e,t),this._adapterData||(this._adapterData=this.adapterData)}toJSON(){const e=super.toJSON();return e.uri=this._uri,e.lineNumber=this._lineNumber,e.column=this._column,e.adapterData=this.adapterData,e}toString(){return`${G(this.uri)} ${this.lineNumber}`}update(e){ie(e.lineNumber)||(this._lineNumber=e.lineNumber),ie(e.column)||(this._column=e.column),ie(e.condition)||(this.condition=e.condition),ie(e.hitCondition)||(this.hitCondition=e.hitCondition),ie(e.logMessage)||(this.logMessage=e.logMessage)}}class E extends pe{constructor(e,t,i,n,s,a=z()){super(t,i,n,s,a),this.name=e}toJSON(){const e=super.toJSON();return e.name=this.name,e}get supported(){return this.data?this.data.supportsFunctionBreakpoints:!0}toString(){return this.name}}class A extends pe{constructor(e,t,i,n,s,a,r,d,u,p=z()){super(n,s,a,r,p),this.description=e,this.dataId=t,this.canPersist=i,this.accessTypes=d,this.accessType=u}toJSON(){const e=super.toJSON();return e.description=this.description,e.dataId=this.dataId,e.accessTypes=this.accessTypes,e.accessType=this.accessType,e}get supported(){return this.data?this.data.supportsDataBreakpoints:!0}toString(){return this.description}}class j extends pe{constructor(e,t,i,n,s,a,r,d=!1){super(i,void 0,s,void 0,z()),this.filter=e,this.label=t,this.supportsCondition=n,this.description=a,this.conditionDescription=r,this.fallback=d,this.supportedSessions=new Set}toJSON(){const e=Object.create(null);return e.filter=this.filter,e.label=this.label,e.enabled=this.enabled,e.supportsCondition=this.supportsCondition,e.conditionDescription=this.conditionDescription,e.condition=this.condition,e.fallback=this.fallback,e.description=this.description,e}setSupportedSession(e,t){t?this.supportedSessions.add(e):this.supportedSessions.delete(e)}setFallback(e){this.fallback=e}get supported(){return!0}isSupportedSession(e){return e?this.supportedSessions.has(e):this.fallback}matches(e){return this.filter===e.filter&&this.label===e.label&&this.supportsCondition===!!e.supportsCondition&&this.conditionDescription===e.conditionDescription&&this.description===e.description}toString(){return this.label}}class O extends pe{constructor(e,t,i,n,s,a,r,d=z()){super(n,s,a,r,d),this.instructionReference=e,this.offset=t,this.canPersist=i}toJSON(){const e=super.toJSON();return e.instructionReference=this.instructionReference,e.offset=this.offset,e}get supported(){return this.data?this.data.supportsInstructionBreakpoints:!0}toString(){return this.instructionReference}}class Pn{constructor(e,t){this.sessionId=e,this.threadId=t}getId(){return`${this.sessionId}:${this.threadId}`}}let Xe=class{constructor(e,t,i,n){this.textFileService=t,this.uriIdentityService=i,this.logService=n,this.schedulers=new Map,this.breakpointsActivated=!0,this._onDidChangeBreakpoints=new fe,this._onDidChangeCallStack=new fe,this._onDidChangeWatchExpressions=new fe,this.breakpoints=e.loadBreakpoints(),this.functionBreakpoints=e.loadFunctionBreakpoints(),this.exceptionBreakpoints=e.loadExceptionBreakpoints(),this.dataBreakpoints=e.loadDataBreakpoints(),this.watchExpressions=e.loadWatchExpressions(),this.instructionBreakpoints=[],this.sessions=[]}getId(){return"root"}getSession(e,t=!1){if(e)return this.getSessions(t).find(i=>i.getId()===e)}getSessions(e=!1){return this.sessions.filter(t=>e||t.state!==0)}addSession(e){this.sessions=this.sessions.filter(n=>!(n.getId()===e.getId()||n.state===0&&n.configuration.name===e.configuration.name));let t=1;for(;this.sessions.some(n=>n.getLabel()===e.getLabel());)e.setName(`${e.configuration.name} ${++t}`);let i=-1;e.parentSession&&(i=Wt(this.sessions,n=>n.parentSession===e.parentSession||n===e.parentSession)),i>=0?this.sessions.splice(i+1,0,e):this.sessions.push(e),this._onDidChangeCallStack.fire(void 0)}get onDidChangeBreakpoints(){return this._onDidChangeBreakpoints.event}get onDidChangeCallStack(){return this._onDidChangeCallStack.event}get onDidChangeWatchExpressions(){return this._onDidChangeWatchExpressions.event}rawUpdate(e){const t=this.sessions.find(i=>i.getId()===e.sessionId);t&&(t.rawUpdate(e),this._onDidChangeCallStack.fire(void 0))}clearThreads(e,t,i=void 0){const n=this.sessions.find(s=>s.getId()===e);this.schedulers.forEach(s=>{s.scheduler.dispose(),s.completeDeferred.complete()}),this.schedulers.clear(),n&&(n.clearThreads(t,i),this._onDidChangeCallStack.fire(void 0))}async fetchCallstack(e,t){var s;if(e.reachedEndOfCallStack)return;const i=(s=e.stoppedDetails)==null?void 0:s.totalFrames,n=typeof i=="number"?i-e.getCallStack().length:void 0;(!t||n&&t>n)&&(t=n),t&&t>0&&(await e.fetchCallStack(t),this._onDidChangeCallStack.fire())}refreshTopOfCallstack(e){if(e.session.capabilities.supportsDelayedStackTraceLoading){let i=Promise.resolve();const n=new Promise((s,a)=>{i=e.fetchCallStack(1).then(()=>{if(!this.schedulers.has(e.getId())){const d=new jt;this.schedulers.set(e.getId(),{completeDeferred:d,scheduler:new Ze(()=>{e.fetchCallStack(19).then(()=>{const u=e.getStaleCallStack(),p=e.getCallStack();let b=u.length!==p.length;for(let C=1;C<u.length&&!b;C++)b=!u[C].equals(p[C]);b&&this._onDidChangeCallStack.fire()}).finally(()=>{d.complete(),this.schedulers.delete(e.getId())})},420)})}const r=this.schedulers.get(e.getId());r.scheduler.schedule(),r.completeDeferred.p.then(s,a),this._onDidChangeCallStack.fire()})});return{topCallStack:i,wholeCallStack:n}}const t=e.fetchCallStack();return{wholeCallStack:t,topCallStack:t}}getBreakpoints(e){var t,i;if(e){const n=(t=e.uri)==null?void 0:t.toString(),s=(i=e.originalUri)==null?void 0:i.toString();return this.breakpoints.filter(a=>!(n&&a.uri.toString()!==n||s&&a.originalUri.toString()!==s||e.lineNumber&&a.lineNumber!==e.lineNumber||e.column&&a.column!==e.column||e.enabledOnly&&(!this.breakpointsActivated||!a.enabled)))}return this.breakpoints}getFunctionBreakpoints(){return this.functionBreakpoints}getDataBreakpoints(){return this.dataBreakpoints}getExceptionBreakpoints(){return this.exceptionBreakpoints}getExceptionBreakpointsForSession(e){return this.exceptionBreakpoints.filter(t=>t.isSupportedSession(e))}getInstructionBreakpoints(){return this.instructionBreakpoints}setExceptionBreakpointsForSession(e,t){if(t){let i=!1;t.forEach(n=>{let s=this.exceptionBreakpoints.filter(a=>a.matches(n)).pop();s||(i=!0,s=new j(n.filter,n.label,!!n.default,!!n.supportsCondition,void 0,n.description,n.conditionDescription),this.exceptionBreakpoints.push(s)),s.setSupportedSession(e,!0)}),i&&this._onDidChangeBreakpoints.fire(void 0)}}removeExceptionBreakpointsForSession(e){this.exceptionBreakpoints.forEach(t=>t.setSupportedSession(e,!1))}setExceptionBreakpointFallbackSession(e){this.exceptionBreakpoints.forEach(t=>t.setFallback(t.isSupportedSession(e)))}setExceptionBreakpointCondition(e,t){e.condition=t,this._onDidChangeBreakpoints.fire(void 0)}areBreakpointsActivated(){return this.breakpointsActivated}setBreakpointsActivated(e){this.breakpointsActivated=e,this._onDidChangeBreakpoints.fire(void 0)}addBreakpoints(e,t,i=!0){const n=t.map(s=>new y(e,s.lineNumber,s.column,s.enabled!==!1,s.condition,s.hitCondition,s.logMessage,void 0,this.textFileService,this.uriIdentityService,this.logService,s.id));return this.breakpoints=this.breakpoints.concat(n),this.breakpointsActivated=!0,this.sortAndDeDup(),i&&this._onDidChangeBreakpoints.fire({added:n,sessionOnly:!1}),n}removeBreakpoints(e){this.breakpoints=this.breakpoints.filter(t=>!e.some(i=>i.getId()===t.getId())),this._onDidChangeBreakpoints.fire({removed:e,sessionOnly:!1})}updateBreakpoints(e){const t=[];this.breakpoints.forEach(i=>{const n=e.get(i.getId());n&&(i.update(n),t.push(i))}),this.sortAndDeDup(),this._onDidChangeBreakpoints.fire({changed:t,sessionOnly:!1})}setBreakpointSessionData(e,t,i){this.breakpoints.forEach(n=>{if(!i)n.setSessionData(e,void 0);else{const s=i.get(n.getId());s&&n.setSessionData(e,ne(s,t))}}),this.functionBreakpoints.forEach(n=>{if(!i)n.setSessionData(e,void 0);else{const s=i.get(n.getId());s&&n.setSessionData(e,ne(s,t))}}),this.dataBreakpoints.forEach(n=>{if(!i)n.setSessionData(e,void 0);else{const s=i.get(n.getId());s&&n.setSessionData(e,ne(s,t))}}),this.exceptionBreakpoints.forEach(n=>{if(!i)n.setSessionData(e,void 0);else{const s=i.get(n.getId());s&&n.setSessionData(e,ne(s,t))}}),this.instructionBreakpoints.forEach(n=>{if(!i)n.setSessionData(e,void 0);else{const s=i.get(n.getId());s&&n.setSessionData(e,ne(s,t))}}),this._onDidChangeBreakpoints.fire({sessionOnly:!0})}getDebugProtocolBreakpoint(e,t){const i=this.breakpoints.find(n=>n.getId()===e);if(i)return i.getDebugProtocolBreakpoint(t)}sortAndDeDup(){this.breakpoints=this.breakpoints.sort((e,t)=>e.uri.toString()!==t.uri.toString()?G(e.uri).localeCompare(G(t.uri)):e.lineNumber===t.lineNumber?e.column&&t.column?e.column-t.column:1:e.lineNumber-t.lineNumber),this.breakpoints=et(this.breakpoints,e=>`${e.uri.toString()}:${e.lineNumber}:${e.column}`)}setEnablement(e,t){if(e instanceof y||e instanceof E||e instanceof j||e instanceof A||e instanceof O){const i=[];e.enabled!==t&&(e instanceof y||e instanceof E||e instanceof A||e instanceof O)&&i.push(e),e.enabled=t,t&&(this.breakpointsActivated=!0),this._onDidChangeBreakpoints.fire({changed:i,sessionOnly:!1})}}enableOrDisableAllBreakpoints(e){const t=[];this.breakpoints.forEach(i=>{i.enabled!==e&&t.push(i),i.enabled=e}),this.functionBreakpoints.forEach(i=>{i.enabled!==e&&t.push(i),i.enabled=e}),this.dataBreakpoints.forEach(i=>{i.enabled!==e&&t.push(i),i.enabled=e}),this.instructionBreakpoints.forEach(i=>{i.enabled!==e&&t.push(i),i.enabled=e}),e&&(this.breakpointsActivated=!0),this._onDidChangeBreakpoints.fire({changed:t,sessionOnly:!1})}addFunctionBreakpoint(e,t){const i=new E(e,!0,void 0,void 0,void 0,t);return this.functionBreakpoints.push(i),this._onDidChangeBreakpoints.fire({added:[i],sessionOnly:!1}),i}updateFunctionBreakpoint(e,t){const i=this.functionBreakpoints.find(n=>n.getId()===e);i&&(typeof t.name=="string"&&(i.name=t.name),typeof t.condition=="string"&&(i.condition=t.condition),typeof t.hitCondition=="string"&&(i.hitCondition=t.hitCondition),this._onDidChangeBreakpoints.fire({changed:[i],sessionOnly:!1}))}removeFunctionBreakpoints(e){let t;e?(t=this.functionBreakpoints.filter(i=>i.getId()===e),this.functionBreakpoints=this.functionBreakpoints.filter(i=>i.getId()!==e)):(t=this.functionBreakpoints,this.functionBreakpoints=[]),this._onDidChangeBreakpoints.fire({removed:t,sessionOnly:!1})}addDataBreakpoint(e,t,i,n,s){const a=new A(e,t,i,!0,void 0,void 0,void 0,n,s);this.dataBreakpoints.push(a),this._onDidChangeBreakpoints.fire({added:[a],sessionOnly:!1})}removeDataBreakpoints(e){let t;e?(t=this.dataBreakpoints.filter(i=>i.getId()===e),this.dataBreakpoints=this.dataBreakpoints.filter(i=>i.getId()!==e)):(t=this.dataBreakpoints,this.dataBreakpoints=[]),this._onDidChangeBreakpoints.fire({removed:t,sessionOnly:!1})}addInstructionBreakpoint(e,t,i,n){const s=new O(e,t,!1,!0,n,i,void 0);this.instructionBreakpoints.push(s),this._onDidChangeBreakpoints.fire({added:[s],sessionOnly:!0})}removeInstructionBreakpoints(e){let t;e?(t=this.instructionBreakpoints.filter(i=>i.instructionReference===e),this.instructionBreakpoints=this.instructionBreakpoints.filter(i=>i.instructionReference!==e)):(t=this.instructionBreakpoints,this.instructionBreakpoints=[]),this._onDidChangeBreakpoints.fire({removed:t,sessionOnly:!1})}getWatchExpressions(){return this.watchExpressions}addWatchExpression(e){const t=new D(e||"");return this.watchExpressions.push(t),this._onDidChangeWatchExpressions.fire(t),t}renameWatchExpression(e,t){const i=this.watchExpressions.filter(n=>n.getId()===e);i.length===1&&(i[0].name=t,this._onDidChangeWatchExpressions.fire(i[0]))}removeWatchExpressions(e=null){this.watchExpressions=e?this.watchExpressions.filter(t=>t.getId()!==e):[],this._onDidChangeWatchExpressions.fire(void 0)}moveWatchExpression(e,t){const i=this.watchExpressions.find(n=>n.getId()===e);i&&(this.watchExpressions=this.watchExpressions.filter(n=>n.getId()!==e),this.watchExpressions=this.watchExpressions.slice(0,t).concat(i,this.watchExpressions.slice(t)),this._onDidChangeWatchExpressions.fire(void 0))}sourceIsNotAvailable(e){this.sessions.forEach(t=>{const i=t.getSourceForUri(e);i&&(i.available=!1)}),this._onDidChangeCallStack.fire(void 0)}};Xe=$([k(1,Bi),k(2,qt),k(3,Gt)],Xe);const Hn=h("debug-console-view-icon",l.debugConsole,c("debugConsoleViewIcon","View icon of the debug console view.")),Kn=h("run-view-icon",l.debugAlt,c("runViewIcon","View icon of the run view.")),qn=h("variables-view-icon",l.debugAlt,c("variablesViewIcon","View icon of the variables view.")),Gn=h("watch-view-icon",l.debugAlt,c("watchViewIcon","View icon of the watch view.")),Wn=h("callstack-view-icon",l.debugAlt,c("callStackViewIcon","View icon of the call stack view.")),jn=h("breakpoints-view-icon",l.debugAlt,c("breakpointsViewIcon","View icon of the breakpoints view.")),zn=h("loaded-scripts-view-icon",l.debugAlt,c("loadedScriptsViewIcon","View icon of the loaded scripts view.")),St={regular:h("debug-breakpoint",l.debugBreakpoint,c("debugBreakpoint","Icon for breakpoints.")),disabled:h("debug-breakpoint-disabled",l.debugBreakpointDisabled,c("debugBreakpointDisabled","Icon for disabled breakpoints.")),unverified:h("debug-breakpoint-unverified",l.debugBreakpointUnverified,c("debugBreakpointUnverified","Icon for unverified breakpoints."))},vt={regular:h("debug-breakpoint-function",l.debugBreakpointFunction,c("debugBreakpointFunction","Icon for function breakpoints.")),disabled:h("debug-breakpoint-function-disabled",l.debugBreakpointFunctionDisabled,c("debugBreakpointFunctionDisabled","Icon for disabled function breakpoints.")),unverified:h("debug-breakpoint-function-unverified",l.debugBreakpointFunctionUnverified,c("debugBreakpointFunctionUnverified","Icon for unverified function breakpoints."))},It={regular:h("debug-breakpoint-conditional",l.debugBreakpointConditional,c("debugBreakpointConditional","Icon for conditional breakpoints.")),disabled:h("debug-breakpoint-conditional-disabled",l.debugBreakpointConditionalDisabled,c("debugBreakpointConditionalDisabled","Icon for disabled conditional breakpoints.")),unverified:h("debug-breakpoint-conditional-unverified",l.debugBreakpointConditionalUnverified,c("debugBreakpointConditionalUnverified","Icon for unverified conditional breakpoints."))},Ct={regular:h("debug-breakpoint-data",l.debugBreakpointData,c("debugBreakpointData","Icon for data breakpoints.")),disabled:h("debug-breakpoint-data-disabled",l.debugBreakpointDataDisabled,c("debugBreakpointDataDisabled","Icon for disabled data breakpoints.")),unverified:h("debug-breakpoint-data-unverified",l.debugBreakpointDataUnverified,c("debugBreakpointDataUnverified","Icon for unverified data breakpoints."))},Oe={regular:h("debug-breakpoint-log",l.debugBreakpointLog,c("debugBreakpointLog","Icon for log breakpoints.")),disabled:h("debug-breakpoint-log-disabled",l.debugBreakpointLogDisabled,c("debugBreakpointLogDisabled","Icon for disabled log breakpoint.")),unverified:h("debug-breakpoint-log-unverified",l.debugBreakpointLogUnverified,c("debugBreakpointLogUnverified","Icon for unverified log breakpoints."))},Xn=h("debug-hint",l.debugHint,c("debugBreakpointHint","Icon for breakpoint hints shown on hover in editor glyph margin.")),Vi=h("debug-breakpoint-unsupported",l.debugBreakpointUnsupported,c("debugBreakpointUnsupported","Icon for unsupported breakpoints.")),Jn=[St,vt,It,Ct,Oe],Yn=h("debug-stackframe",l.debugStackframe,c("debugStackframe","Icon for a stackframe shown in the editor glyph margin.")),$n=h("debug-stackframe-focused",l.debugStackframeFocused,c("debugStackframeFocused","Icon for a focused stackframe  shown in the editor glyph margin.")),Qn=h("debug-gripper",l.gripper,c("debugGripper","Icon for the debug bar gripper.")),Zn=h("debug-restart-frame",l.debugRestartFrame,c("debugRestartFrame","Icon for the debug restart frame action.")),es=h("debug-stop",l.debugStop,c("debugStop","Icon for the debug stop action.")),ts=h("debug-disconnect",l.debugDisconnect,c("debugDisconnect","Icon for the debug disconnect action.")),is=h("debug-restart",l.debugRestart,c("debugRestart","Icon for the debug restart action.")),ns=h("debug-step-over",l.debugStepOver,c("debugStepOver","Icon for the debug step over action.")),ss=h("debug-step-into",l.debugStepInto,c("debugStepInto","Icon for the debug step into action.")),os=h("debug-step-out",l.debugStepOut,c("debugStepOut","Icon for the debug step out action.")),as=h("debug-step-back",l.debugStepBack,c("debugStepBack","Icon for the debug step back action.")),rs=h("debug-pause",l.debugPause,c("debugPause","Icon for the debug pause action.")),cs=h("debug-continue",l.debugContinue,c("debugContinue","Icon for the debug continue action.")),ds=h("debug-reverse-continue",l.debugReverseContinue,c("debugReverseContinue","Icon for the debug reverse continue action.")),us=h("debug-run",l.run,c("debugRun","Icon for the run or debug action.")),ls=h("debug-start",l.debugStart,c("debugStart","Icon for the debug start action.")),hs=h("debug-configure",l.gear,c("debugConfigure","Icon for the debug configure action."));h("debug-console",l.gear,c("debugConsole","Icon for the debug console open action."));const ps=h("debug-remove-config",l.trash,c("debugRemoveConfig","Icon for removing debug configurations."));h("debug-collapse-all",l.collapseAll,c("debugCollapseAll","Icon for the collapse all action in the debug views."));const gs=h("callstack-view-session",l.bug,c("callstackViewSession","Icon for the session icon in the call stack view.")),fs=h("debug-console-clear-all",l.clearAll,c("debugConsoleClearAll","Icon for the clear all action in the debug console.")),bs=h("watch-expressions-remove-all",l.closeAll,c("watchExpressionsRemoveAll","Icon for the Remove All action in the watch view.")),ms=h("watch-expression-remove",l.removeClose,c("watchExpressionRemove","Icon for the Remove action in the watch view.")),ks=h("watch-expressions-add",l.add,c("watchExpressionsAdd","Icon for the add action in the watch view.")),Pi=h("watch-expressions-add-function-breakpoint",l.add,c("watchExpressionsAddFuncBreakpoint","Icon for the add function breakpoint action in the watch view.")),Ui=h("breakpoints-remove-all",l.closeAll,c("breakpointsRemoveAll","Icon for the Remove All action in the breakpoints view.")),Hi=h("breakpoints-activate",l.activateBreakpoints,c("breakpointsActivate","Icon for the activate action in the breakpoints view.")),Ss=h("debug-console-evaluation-input",l.arrowSmallRight,c("debugConsoleEvaluationInput","Icon for the debug evaluation input marker.")),vs=h("debug-console-evaluation-prompt",l.chevronRight,c("debugConsoleEvaluationPrompt","Icon for the debug evaluation prompt.")),Is=h("debug-inspect-memory",l.fileBinary,c("debugInspectMemory","Icon for the inspect memory action.")),m=hi;function P(o){const e=m("input");return e.type="checkbox",e.tabIndex=-1,o.push(pi.ignoreTarget(e)),e}const Ki=9;function Je(o,e,t){const i=o.getBreakpoints().length+o.getExceptionBreakpointsForSession(e).length+o.getFunctionBreakpoints().length+o.getDataBreakpoints().length+o.getInstructionBreakpoints().length;return Math.min(t,i)*22}let Ye=class extends xi{constructor(e,t,i,n,s,a,r,d,u,p,b,C,_,U,H,_e,Mt){super(e,n,t,u,b,p,s,C,a,_),this.debugService=i,this.editorService=r,this.contextViewService=d,this.labelService=U,this.hoverService=_e,this.languageService=Mt,this.needsRefresh=!1,this.needsStateChange=!1,this.ignoreLayout=!1,this.autoFocusedIndex=-1,this.menu=H.createMenu(S.DebugBreakpointsContext,b),this._register(this.menu),this.breakpointItemType=L.bindTo(b),this.breakpointSupportsCondition=Pe.bindTo(b),this.breakpointInputFocused=pt.bindTo(b),this._register(this.debugService.getModel().onDidChangeBreakpoints(()=>this.onBreakpointsChange())),this._register(this.debugService.getViewModel().onDidFocusSession(()=>this.onBreakpointsChange())),this._register(this.debugService.onDidChangeState(()=>this.onStateChange())),this.hintDelayer=this._register(new Ze(()=>this.updateBreakpointsHint(!0),4e3))}renderBody(e){super.renderBody(e),this.element.classList.add("debug-pane"),e.classList.add("debug-breakpoints");const t=new qi(this);this.list=this.instantiationService.createInstance(ai,"Breakpoints",e,t,[this.instantiationService.createInstance(ae,this.menu,this.breakpointSupportsCondition,this.breakpointItemType),new me(this.menu,this.breakpointSupportsCondition,this.breakpointItemType,this.debugService),new Se(this,this.debugService,this.contextViewService),this.instantiationService.createInstance(re,this.menu,this.breakpointSupportsCondition,this.breakpointItemType),this.instantiationService.createInstance(ce),new ke(this,this.debugService,this.contextViewService,this.labelService),this.instantiationService.createInstance(de)],{identityProvider:{getId:n=>n.getId()},multipleSelectionSupport:!1,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:n=>n},accessibilityProvider:new Gi(this.debugService,this.labelService),overrideStyles:{listBackground:this.getBackgroundColor()}}),ye.bindTo(this.list.contextKeyService),this._register(this.list.onContextMenu(this.onListContextMenu,this)),this.list.onMouseMiddleClick(async({element:n})=>{n instanceof y?await this.debugService.removeBreakpoints(n.getId()):n instanceof E?await this.debugService.removeFunctionBreakpoints(n.getId()):n instanceof A?await this.debugService.removeDataBreakpoints(n.getId()):n instanceof O&&await this.debugService.removeInstructionBreakpoints(n.instructionReference)}),this._register(this.list.onDidOpen(async n=>{var s;n.element&&(n.browserEvent instanceof MouseEvent&&n.browserEvent.button===1||(n.element instanceof y&&He(n.element,n.sideBySide,n.editorOptions.preserveFocus||!1,n.editorOptions.pinned||!n.editorOptions.preserveFocus,this.debugService,this.editorService),n.element instanceof O&&(await this.editorService.openEditor(T.instance)).goToAddress(n.element.instructionReference,n.browserEvent instanceof MouseEvent&&n.browserEvent.detail===2),n.browserEvent instanceof MouseEvent&&n.browserEvent.detail===2&&n.element instanceof E&&n.element!==((s=this.inputBoxData)==null?void 0:s.breakpoint)&&this.renderInputBox({breakpoint:n.element,type:"name"})))})),this.list.splice(0,this.list.length,this.elements),this._register(this.onDidChangeBodyVisibility(n=>{n&&(this.needsRefresh&&this.onBreakpointsChange(),this.needsStateChange&&this.onStateChange())}));const i=this.viewDescriptorService.getViewContainerModel(this.viewDescriptorService.getViewContainerByViewId(this.id));this._register(i.onDidChangeAllViewDescriptors(()=>{this.updateSize()}))}renderHeaderTitle(e,t){super.renderHeaderTitle(e,t);const i=f(e,m("span.breakpoint-warning"));this.hintContainer=this._register(new ri(i,{supportIcons:!0,hoverDelegate:{showHover:(n,s)=>this.hoverService.showHover({content:n.content,target:this.hintContainer.element},s),delay:this.configurationService.getValue("workbench.hover.delay")}})),ze(this.hintContainer.element)}focus(){var e;super.focus(),(e=this.list)==null||e.domFocus()}renderInputBox(e){this._inputBoxData=e,this.onBreakpointsChange(),this._inputBoxData=void 0}get inputBoxData(){return this._inputBoxData}layoutBody(e,t){var i;if(!this.ignoreLayout){super.layoutBody(e,t),(i=this.list)==null||i.layout(e,t);try{this.ignoreLayout=!0,this.updateSize()}finally{this.ignoreLayout=!1}}}onListContextMenu(e){const t=e.element,i=t instanceof y?"breakpoint":t instanceof j?"exceptionBreakpoint":t instanceof E?"functionBreakpoint":t instanceof A?"dataBreakpoint":t instanceof O?"instructionBreakpoint":void 0;this.breakpointItemType.set(i);const n=this.debugService.getViewModel().focusedSession,s=t instanceof j?t.supportsCondition:!n||!!n.capabilities.supportsConditionalBreakpoints;this.breakpointSupportsCondition.set(s);const a=[];ci(this.menu,{arg:e.element,shouldForwardArgs:!1},{primary:[],secondary:a},"inline"),this.contextMenuService.showContextMenu({getAnchor:()=>e.anchor,getActions:()=>a,getActionsContext:()=>t})}updateSize(){var i;const e=this.viewDescriptorService.getViewContainerModel(this.viewDescriptorService.getViewContainerByViewId(this.id)),t=(i=this.debugService.getViewModel().focusedSession)==null?void 0:i.getId();this.minimumBodySize=this.orientation===0?Je(this.debugService.getModel(),t,Ki):170,this.maximumBodySize=this.orientation===0&&e.visibleViewDescriptors.length>1?Je(this.debugService.getModel(),t,Number.POSITIVE_INFINITY):Number.POSITIVE_INFINITY}updateBreakpointsHint(e=!1){var a,r;if(!this.hintContainer)return;const t=(a=this.debugService.getViewModel().focusedSession)==null?void 0:a.configuration.type,i=t?this.debugService.getAdapterManager().getDebugger(t):void 0,n=(r=i==null?void 0:i.strings)==null?void 0:r[_i.UnverifiedBreakpoints],s=n&&this.debugService.getModel().getBreakpoints().filter(d=>{if(d.verified||!d.enabled)return!1;const u=this.languageService.guessLanguageIdByFilepathOrFirstLine(d.uri);return u&&i.interestedInLanguage(u)});if(n&&(s!=null&&s.length)&&this.debugService.getModel().areBreakpointsActivated())if(e){const d=new di(void 0,{isTrusted:!0}).appendMarkdown(n);this.hintContainer.setLabel("$(warning)",void 0,{title:{markdown:d,markdownNotSupportedFallback:n}}),ui(this.hintContainer.element)}else this.hintDelayer.schedule();else ze(this.hintContainer.element)}onBreakpointsChange(){if(this.isBodyVisible()){if(this.updateSize(),this.list){const e=this.list.getFocus()[0],t=e&&!this.elements.includes(this.list.element(e));this.list.splice(0,this.list.length,this.elements),this.needsRefresh=!1,t&&this.list.focusNth(Math.min(e,this.list.length-1))}this.updateBreakpointsHint()}else this.needsRefresh=!0}onStateChange(){if(this.isBodyVisible()){this.needsStateChange=!1;const e=this.debugService.getViewModel().focusedThread;let t=!1;if(e&&e.stoppedDetails&&e.stoppedDetails.hitBreakpointIds&&e.stoppedDetails.hitBreakpointIds.length>0){const i=e.stoppedDetails.hitBreakpointIds,s=this.elements.findIndex(a=>{const r=a.getIdFromAdapter(e.session.getId());return typeof r=="number"&&i.indexOf(r)!==-1});s>=0&&(this.list.setFocus([s]),this.list.setSelection([s]),t=!0,this.autoFocusedIndex=s)}if(!t){const i=this.list.getFocus(),n=this.list.getSelection();this.autoFocusedIndex>=0&&li(i,n)&&i.indexOf(this.autoFocusedIndex)>=0&&(this.list.setFocus([]),this.list.setSelection([])),this.autoFocusedIndex=-1}this.updateBreakpointsHint()}else this.needsStateChange=!0}get elements(){var n;const e=this.debugService.getModel(),t=(n=this.debugService.getViewModel().focusedSession)==null?void 0:n.getId();return e.getExceptionBreakpointsForSession(t).concat(e.getFunctionBreakpoints()).concat(e.getDataBreakpoints()).concat(e.getBreakpoints()).concat(e.getInstructionBreakpoints())}};Ye=$([k(1,tt),k(2,g),k(3,Zt),k(4,ei),k(5,ti),k(6,R),k(7,ii),k(8,Re),k(9,Di),k(10,ue),k(11,ni),k(12,si),k(13,X),k(14,oi),k(15,yi),k(16,it)],Ye);class qi{constructor(e){this.view=e}getHeight(e){return 22}getTemplateId(e){var t,i;if(e instanceof y)return ae.ID;if(e instanceof E){const n=(t=this.view.inputBoxData)==null?void 0:t.breakpoint;return!e.name||n&&n.getId()===e.getId()?ke.ID:re.ID}if(e instanceof j){const n=(i=this.view.inputBoxData)==null?void 0:i.breakpoint;return n&&n.getId()===e.getId()?Se.ID:me.ID}return e instanceof A?ce.ID:e instanceof O?de.ID:""}}const xe=new Map;let ae=class Bt{constructor(e,t,i,n,s){this.menu=e,this.breakpointSupportsCondition=t,this.breakpointItemType=i,this.debugService=n,this.labelService=s}get templateId(){return Bt.ID}renderTemplate(e){const t=Object.create(null);t.toDispose=[],t.breakpoint=f(e,m(".breakpoint")),t.icon=m(".icon"),t.checkbox=P(t.toDispose),t.toDispose.push(V(t.checkbox,"change",n=>{this.debugService.enableOrDisableBreakpoints(!t.context.enabled,t.context)})),f(t.breakpoint,t.icon),f(t.breakpoint,t.checkbox),t.name=f(t.breakpoint,m("span.name")),t.filePath=f(t.breakpoint,m("span.file-path")),t.actionBar=new Be(t.breakpoint),t.toDispose.push(t.actionBar);const i=f(t.breakpoint,m(".line-number-container"));return t.lineNumber=f(i,m("span.line-number.monaco-count-badge")),t}renderElement(e,t,i){i.context=e,i.breakpoint.classList.toggle("disabled",!this.debugService.getModel().areBreakpointsActivated()),i.name.textContent=G(e.uri),i.lineNumber.textContent=e.lineNumber.toString(),e.column&&(i.lineNumber.textContent+=`:${e.column}`),i.filePath.textContent=this.labelService.getUriLabel(nt(e.uri),{relative:!0}),i.checkbox.checked=e.enabled;const{message:n,icon:s}=te(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),e,this.labelService);i.icon.className=he.asClassName(s),i.breakpoint.title=e.message||n||"",(this.debugService.state===3||this.debugService.state===2)&&!e.verified&&i.breakpoint.classList.add("disabled");const r=[],d=this.debugService.getViewModel().focusedSession;this.breakpointSupportsCondition.set(!d||!!d.capabilities.supportsConditionalBreakpoints),this.breakpointItemType.set("breakpoint"),Fe(this.menu,{arg:e,shouldForwardArgs:!0},{primary:r,secondary:[]},"inline"),i.actionBar.clear(),i.actionBar.push(r,{icon:!0,label:!1}),xe.set(e.getId(),i.actionBar.domNode)}disposeTemplate(e){F(e.toDispose)}};ae.ID="breakpoints";ae=$([k(3,g),k(4,X)],ae);const ve=class ve{constructor(e,t,i,n){this.menu=e,this.breakpointSupportsCondition=t,this.breakpointItemType=i,this.debugService=n}get templateId(){return ve.ID}renderTemplate(e){const t=Object.create(null);return t.toDispose=[],t.breakpoint=f(e,m(".breakpoint")),t.checkbox=P(t.toDispose),t.toDispose.push(V(t.checkbox,"change",i=>{this.debugService.enableOrDisableBreakpoints(!t.context.enabled,t.context)})),f(t.breakpoint,t.checkbox),t.name=f(t.breakpoint,m("span.name")),t.condition=f(t.breakpoint,m("span.condition")),t.breakpoint.classList.add("exception"),t.actionBar=new Be(t.breakpoint),t.toDispose.push(t.actionBar),t}renderElement(e,t,i){i.context=e,i.name.textContent=e.label||`${e.filter} exceptions`,i.breakpoint.title=e.verified?e.description||i.name.textContent:e.message||c("unverifiedExceptionBreakpoint","Unverified Exception Breakpoint"),i.breakpoint.classList.toggle("disabled",!e.verified),i.checkbox.checked=e.enabled,i.condition.textContent=e.condition||"",i.condition.title=c("expressionCondition","Expression condition: {0}",e.condition);const n=[];this.breakpointSupportsCondition.set(e.supportsCondition),this.breakpointItemType.set("exceptionBreakpoint"),Fe(this.menu,{arg:e,shouldForwardArgs:!0},{primary:n,secondary:[]},"inline"),i.actionBar.clear(),i.actionBar.push(n,{icon:!0,label:!1}),xe.set(e.getId(),i.actionBar.domNode)}disposeTemplate(e){F(e.toDispose)}};ge(ve,"ID","exceptionbreakpoints");let me=ve,re=class wt{constructor(e,t,i,n,s){this.menu=e,this.breakpointSupportsCondition=t,this.breakpointItemType=i,this.debugService=n,this.labelService=s}get templateId(){return wt.ID}renderTemplate(e){const t=Object.create(null);return t.toDispose=[],t.breakpoint=f(e,m(".breakpoint")),t.icon=m(".icon"),t.checkbox=P(t.toDispose),t.toDispose.push(V(t.checkbox,"change",i=>{this.debugService.enableOrDisableBreakpoints(!t.context.enabled,t.context)})),f(t.breakpoint,t.icon),f(t.breakpoint,t.checkbox),t.name=f(t.breakpoint,m("span.name")),t.condition=f(t.breakpoint,m("span.condition")),t.actionBar=new Be(t.breakpoint),t.toDispose.push(t.actionBar),t}renderElement(e,t,i){i.context=e,i.name.textContent=e.name;const{icon:n,message:s}=te(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),e,this.labelService);i.icon.className=he.asClassName(n),i.icon.title=s||"",i.checkbox.checked=e.enabled,i.breakpoint.title=s||"",e.condition&&e.hitCondition?i.condition.textContent=c("expressionAndHitCount","Expression: {0} | Hit Count: {1}",e.condition,e.hitCondition):i.condition.textContent=e.condition||e.hitCondition||"";const a=this.debugService.getViewModel().focusedSession;i.breakpoint.classList.toggle("disabled",a&&!a.capabilities.supportsFunctionBreakpoints||!this.debugService.getModel().areBreakpointsActivated()),a&&!a.capabilities.supportsFunctionBreakpoints&&(i.breakpoint.title=c("functionBreakpointsNotSupported","Function breakpoints are not supported by this debug type"));const r=[];this.breakpointSupportsCondition.set(!a||!!a.capabilities.supportsConditionalBreakpoints),this.breakpointItemType.set("functionBreakpoint"),Fe(this.menu,{arg:e,shouldForwardArgs:!0},{primary:r,secondary:[]},"inline"),i.actionBar.clear(),i.actionBar.push(r,{icon:!0,label:!1}),xe.set(e.getId(),i.actionBar.domNode)}disposeTemplate(e){F(e.toDispose)}};re.ID="functionbreakpoints";re=$([k(3,g),k(4,X)],re);let ce=class Dt{constructor(e,t){this.debugService=e,this.labelService=t}get templateId(){return Dt.ID}renderTemplate(e){const t=Object.create(null);return t.breakpoint=f(e,m(".breakpoint")),t.toDispose=[],t.icon=m(".icon"),t.checkbox=P(t.toDispose),t.toDispose.push(V(t.checkbox,"change",i=>{this.debugService.enableOrDisableBreakpoints(!t.context.enabled,t.context)})),f(t.breakpoint,t.icon),f(t.breakpoint,t.checkbox),t.name=f(t.breakpoint,m("span.name")),t.accessType=f(t.breakpoint,m("span.access-type")),t}renderElement(e,t,i){i.context=e,i.name.textContent=e.description;const{icon:n,message:s}=te(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),e,this.labelService);i.icon.className=he.asClassName(n),i.icon.title=s||"",i.checkbox.checked=e.enabled,i.breakpoint.title=s||"";const a=this.debugService.getViewModel().focusedSession;if(i.breakpoint.classList.toggle("disabled",a&&!a.capabilities.supportsDataBreakpoints||!this.debugService.getModel().areBreakpointsActivated()),a&&!a.capabilities.supportsDataBreakpoints&&(i.breakpoint.title=c("dataBreakpointsNotSupported","Data breakpoints are not supported by this debug type")),e.accessType){const r=e.accessType==="read"?c("read","Read"):e.accessType==="write"?c("write","Write"):c("access","Access");i.accessType.textContent=r}else i.accessType.textContent=""}disposeTemplate(e){F(e.toDispose)}};ce.ID="databreakpoints";ce=$([k(0,g),k(1,X)],ce);let de=class yt{constructor(e,t){this.debugService=e,this.labelService=t}get templateId(){return yt.ID}renderTemplate(e){const t=Object.create(null);return t.toDispose=[],t.breakpoint=f(e,m(".breakpoint")),t.icon=m(".icon"),t.checkbox=P(t.toDispose),t.toDispose.push(V(t.checkbox,"change",i=>{this.debugService.enableOrDisableBreakpoints(!t.context.enabled,t.context)})),f(t.breakpoint,t.icon),f(t.breakpoint,t.checkbox),t.name=f(t.breakpoint,m("span.name")),t.address=f(t.breakpoint,m("span.file-path")),t.actionBar=new Be(t.breakpoint),t.toDispose.push(t.actionBar),t}renderElement(e,t,i){i.context=e,i.breakpoint.classList.toggle("disabled",!this.debugService.getModel().areBreakpointsActivated()),i.name.textContent=e.instructionReference,i.checkbox.checked=e.enabled;const{message:n,icon:s}=te(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),e,this.labelService);i.icon.className=he.asClassName(s),i.breakpoint.title=e.message||n||"",(this.debugService.state===3||this.debugService.state===2)&&!e.verified&&i.breakpoint.classList.add("disabled")}disposeTemplate(e){F(e.toDispose)}};de.ID="instructionBreakpoints";de=$([k(0,g),k(1,X)],de);const Ie=class Ie{constructor(e,t,i,n){this.view=e,this.debugService=t,this.contextViewService=i,this.labelService=n}get templateId(){return Ie.ID}renderTemplate(e){const t=Object.create(null),i=[],n=f(e,m(".breakpoint"));t.icon=m(".icon"),t.checkbox=P(i),f(n,t.icon),f(n,t.checkbox),this.view.breakpointInputFocused.set(!0);const s=f(n,m(".inputBoxContainer")),a=new st(s,this.contextViewService,{inputBoxStyles:ot}),r=d=>{t.updating=!0;try{this.view.breakpointInputFocused.set(!1);const u=t.breakpoint.getId();d?(t.type==="name"&&this.debugService.updateFunctionBreakpoint(u,{name:a.value}),t.type==="condition"&&this.debugService.updateFunctionBreakpoint(u,{condition:a.value}),t.type==="hitCount"&&this.debugService.updateFunctionBreakpoint(u,{hitCondition:a.value})):t.type==="name"&&!t.breakpoint.name?this.debugService.removeFunctionBreakpoints(u):this.view.renderInputBox(void 0)}finally{t.updating=!1}};return i.push(V(a.inputElement,"keydown",d=>{const u=d.equals(9),p=d.equals(3);(u||p)&&(d.preventDefault(),d.stopPropagation(),r(p))})),i.push(at(a.inputElement,"blur",()=>{t.updating||r(!!a.value)})),t.inputBox=a,t.toDispose=i,t}renderElement(e,t,i){var d;i.breakpoint=e,i.type=((d=this.view.inputBoxData)==null?void 0:d.type)||"name";const{icon:n,message:s}=te(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),e,this.labelService);i.icon.className=he.asClassName(n),i.icon.title=s||"",i.checkbox.checked=e.enabled,i.checkbox.disabled=!0,i.inputBox.value=e.name||"";let a=c("functionBreakpointPlaceholder","Function to break on"),r=c("functionBreakPointInputAriaLabel","Type function breakpoint.");i.type==="condition"?(i.inputBox.value=e.condition||"",a=c("functionBreakpointExpressionPlaceholder","Break when expression evaluates to true"),r=c("functionBreakPointExpresionAriaLabel","Type expression. Function breakpoint will break when expression evaluates to true")):i.type==="hitCount"&&(i.inputBox.value=e.hitCondition||"",a=c("functionBreakpointHitCountPlaceholder","Break when hit count is met"),r=c("functionBreakPointHitCountAriaLabel","Type hit count. Function breakpoint will break when hit count is met.")),i.inputBox.setAriaLabel(r),i.inputBox.setPlaceHolder(a),setTimeout(()=>{i.inputBox.focus(),i.inputBox.select()},0)}disposeTemplate(e){F(e.toDispose)}};ge(Ie,"ID","functionbreakpointinput");let ke=Ie;const Ce=class Ce{constructor(e,t,i){this.view=e,this.debugService=t,this.contextViewService=i}get templateId(){return Ce.ID}renderTemplate(e){const t=Object.create(null),i=[],n=f(e,m(".breakpoint"));n.classList.add("exception"),t.checkbox=P(i),f(n,t.checkbox),this.view.breakpointInputFocused.set(!0);const s=f(n,m(".inputBoxContainer")),a=new st(s,this.contextViewService,{ariaLabel:c("exceptionBreakpointAriaLabel","Type exception breakpoint condition"),inputBoxStyles:ot}),r=d=>{this.view.breakpointInputFocused.set(!1);let u=t.breakpoint.condition;d&&(u=a.value!==""?a.value:void 0),this.debugService.setExceptionBreakpointCondition(t.breakpoint,u)};return i.push(V(a.inputElement,"keydown",d=>{const u=d.equals(9),p=d.equals(3);(u||p)&&(d.preventDefault(),d.stopPropagation(),r(p))})),i.push(at(a.inputElement,"blur",()=>{setTimeout(()=>{r(!0)})})),t.inputBox=a,t.toDispose=i,t}renderElement(e,t,i){const n=e.conditionDescription||c("exceptionBreakpointPlaceholder","Break when expression evaluates to true");i.inputBox.setPlaceHolder(n),i.breakpoint=e,i.checkbox.checked=e.enabled,i.checkbox.disabled=!0,i.inputBox.value=e.condition||"",setTimeout(()=>{i.inputBox.focus(),i.inputBox.select()},0)}disposeTemplate(e){F(e.toDispose)}};ge(Ce,"ID","exceptionbreakpointinput");let Se=Ce;class Gi{constructor(e,t){this.debugService=e,this.labelService=t}getWidgetAriaLabel(){return c("breakpoints","Breakpoints")}getRole(){return"checkbox"}isChecked(e){return e.enabled}getAriaLabel(e){if(e instanceof j)return e.toString();const{message:t}=te(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),e,this.labelService),i=e.toString();return t?`${i}, ${t}`:i}}function He(o,e,t,i,n,s){if(o.uri.scheme===q&&n.state===0)return Promise.resolve(void 0);const a=o.endLineNumber?{startLineNumber:o.lineNumber,endLineNumber:o.endLineNumber,startColumn:o.column||1,endColumn:o.endColumn||1073741824}:{startLineNumber:o.lineNumber,startColumn:o.column||1,endLineNumber:o.lineNumber,endColumn:o.column||1073741824};return s.openEditor({resource:o.uri,options:{preserveFocus:t,selection:a,revealIfOpened:!0,selectionRevealType:1,pinned:i}},e?lt:ht)}function te(o,e,t,i){const n=o===3||o===2,s=t instanceof A?Ct:t instanceof E?vt:t.logMessage?Oe:St;if(!t.enabled||!e)return{icon:s.disabled,message:t.logMessage?c("disabledLogpoint","Disabled Logpoint"):c("disabledBreakpoint","Disabled Breakpoint")};const a=d=>"message"in t&&t.message?d.concat(", "+t.message):d;if(n&&!t.verified)return{icon:s.unverified,message:"message"in t&&t.message?t.message:t.logMessage?c("unverifiedLogpoint","Unverified Logpoint"):c("unverifiedBreakpoint","Unverified Breakpoint"),showAdapterUnverifiedMessage:!0};if(t instanceof A)return t.supported?{icon:s.regular,message:t.message||c("dataBreakpoint","Data Breakpoint")}:{icon:s.unverified,message:c("dataBreakpointUnsupported","Data breakpoints not supported by this debug type")};if(t instanceof E){if(!t.supported)return{icon:s.unverified,message:c("functionBreakpointUnsupported","Function breakpoints not supported by this debug type")};const d=[];return d.push(t.message||c("functionBreakpoint","Function Breakpoint")),t.condition&&d.push(c("expression","Expression condition: {0}",t.condition)),t.hitCondition&&d.push(c("hitCount","Hit Count: {0}",t.hitCondition)),{icon:s.regular,message:a(d.join(`
`))}}if(t instanceof O){if(!t.supported)return{icon:s.unverified,message:c("instructionBreakpointUnsupported","Instruction breakpoints not supported by this debug type")};const d=[];return t.message?d.push(t.message):t.instructionReference?d.push(c("instructionBreakpointAtAddress","Instruction breakpoint at address {0}",t.instructionReference)):d.push(c("instructionBreakpoint","Instruction breakpoint")),t.hitCondition&&d.push(c("hitCount","Hit Count: {0}",t.hitCondition)),{icon:s.regular,message:a(d.join(`
`))}}if(t.logMessage||t.condition||t.hitCondition){const d=[];return t.supported?(t.logMessage&&d.push(c("logMessage","Log Message: {0}",t.logMessage)),t.condition&&d.push(c("expression","Expression condition: {0}",t.condition)),t.hitCondition&&d.push(c("hitCount","Hit Count: {0}",t.hitCondition)),{icon:t.logMessage?Oe.regular:It.regular,message:a(d.join(`
`))}):{icon:Vi,message:c("breakpointUnsupported","Breakpoints of this type are not supported by the debugger")}}const r="message"in t&&t.message?t.message:t instanceof y&&i?i.getUriLabel(t.uri):c("breakpoint","Breakpoint");return{icon:s.regular,message:r}}N(class extends M{constructor(){super({id:"workbench.debug.viewlet.action.addFunctionBreakpointAction",title:{value:c("addFunctionBreakpoint","Add Function Breakpoint"),original:"Add Function Breakpoint",mnemonicTitle:c({key:"miFunctionBreakpoint",comment:["&& denotes a mnemonic"]},"&&Function Breakpoint...")},f1:!0,icon:Pi,menu:[{id:S.ViewTitle,group:"navigation",order:10,when:B.equals("view",Q)},{id:S.MenubarNewBreakpointMenu,group:"1_breakpoints",order:3,when:W}]})}run(o){o.get(g).addFunctionBreakpoint()}});N(class extends M{constructor(){super({id:"workbench.debug.viewlet.action.toggleBreakpointsActivatedAction",title:{value:c("activateBreakpoints","Toggle Activate Breakpoints"),original:"Toggle Activate Breakpoints"},f1:!0,icon:Hi,menu:{id:S.ViewTitle,group:"navigation",order:20,when:B.equals("view",Q)}})}run(o){const e=o.get(g);e.setBreakpointsActivated(!e.getModel().areBreakpointsActivated())}});N(class extends M{constructor(){super({id:"workbench.debug.viewlet.action.removeBreakpoint",title:c("removeBreakpoint","Remove Breakpoint"),icon:l.removeClose,menu:[{id:S.DebugBreakpointsContext,group:"3_modification",order:10,when:L.notEqualsTo("exceptionBreakpoint")},{id:S.DebugBreakpointsContext,group:"inline",order:20,when:L.notEqualsTo("exceptionBreakpoint")}]})}async run(o,e){const t=o.get(g);e instanceof y?await t.removeBreakpoints(e.getId()):e instanceof E?await t.removeFunctionBreakpoints(e.getId()):e instanceof A?await t.removeDataBreakpoints(e.getId()):e instanceof O&&await t.removeInstructionBreakpoints(e.instructionReference)}});N(class extends M{constructor(){super({id:"workbench.debug.viewlet.action.removeAllBreakpoints",title:{original:"Remove All Breakpoints",value:c("removeAllBreakpoints","Remove All Breakpoints"),mnemonicTitle:c({key:"miRemoveAllBreakpoints",comment:["&& denotes a mnemonic"]},"Remove &&All Breakpoints")},f1:!0,icon:Ui,menu:[{id:S.ViewTitle,group:"navigation",order:30,when:B.equals("view",Q)},{id:S.DebugBreakpointsContext,group:"3_modification",order:20,when:B.and(De,L.notEqualsTo("exceptionBreakpoint"))},{id:S.MenubarDebugMenu,group:"5_breakpoints",order:3,when:W}]})}run(o){const e=o.get(g);e.removeBreakpoints(),e.removeFunctionBreakpoints(),e.removeDataBreakpoints(),e.removeInstructionBreakpoints()}});N(class extends M{constructor(){super({id:"workbench.debug.viewlet.action.enableAllBreakpoints",title:{original:"Enable All Breakpoints",value:c("enableAllBreakpoints","Enable All Breakpoints"),mnemonicTitle:c({key:"miEnableAllBreakpoints",comment:["&& denotes a mnemonic"]},"&&Enable All Breakpoints")},f1:!0,precondition:W,menu:[{id:S.DebugBreakpointsContext,group:"z_commands",order:10,when:B.and(De,L.notEqualsTo("exceptionBreakpoint"))},{id:S.MenubarDebugMenu,group:"5_breakpoints",order:1,when:W}]})}async run(o){await o.get(g).enableOrDisableBreakpoints(!0)}});N(class extends M{constructor(){super({id:"workbench.debug.viewlet.action.disableAllBreakpoints",title:{original:"Disable All Breakpoints",value:c("disableAllBreakpoints","Disable All Breakpoints"),mnemonicTitle:c({key:"miDisableAllBreakpoints",comment:["&& denotes a mnemonic"]},"Disable A&&ll Breakpoints")},f1:!0,precondition:W,menu:[{id:S.DebugBreakpointsContext,group:"z_commands",order:20,when:B.and(De,L.notEqualsTo("exceptionBreakpoint"))},{id:S.MenubarDebugMenu,group:"5_breakpoints",order:2,when:W}]})}async run(o){await o.get(g).enableOrDisableBreakpoints(!1)}});N(class extends M{constructor(){super({id:"workbench.debug.viewlet.action.reapplyBreakpointsAction",title:{value:c("reapplyAllBreakpoints","Reapply All Breakpoints"),original:"Reapply All Breakpoints"},f1:!0,precondition:Z,menu:[{id:S.DebugBreakpointsContext,group:"z_commands",order:30,when:B.and(De,L.notEqualsTo("exceptionBreakpoint"))}]})}async run(o){await o.get(g).setBreakpointsActivated(!0)}});N(class extends Ve{constructor(){super({id:"debug.editBreakpoint",viewId:Q,title:c("editCondition","Edit Condition..."),icon:l.edit,precondition:Pe,menu:[{id:S.DebugBreakpointsContext,group:"navigation",order:10},{id:S.DebugBreakpointsContext,group:"inline",order:10}]})}async runInView(o,e,t){var s;const i=o.get(g),n=o.get(R);if(t instanceof y){const a=await He(t,!1,!1,!0,i,n);if(a){const r=a.getControl();le(r)&&((s=r.getContribution(Ei))==null||s.showBreakpointWidget(t.lineNumber,t.column))}}else if(t instanceof E){const a=o.get(tt),r=[new je("breakpoint.editCondition",c("editCondition","Edit Condition..."),void 0,!0,async()=>e.renderInputBox({breakpoint:t,type:"condition"})),new je("breakpoint.editCondition",c("editHitCount","Edit Hit Count..."),void 0,!0,async()=>e.renderInputBox({breakpoint:t,type:"hitCount"}))],d=xe.get(t.getId());d&&a.showContextMenu({getActions:()=>r,getAnchor:()=>d,onHide:()=>F(r)})}else e.renderInputBox({breakpoint:t,type:"condition"})}});N(class extends Ve{constructor(){super({id:"debug.editFunctionBreakpoint",viewId:Q,title:c("editBreakpoint","Edit Function Breakpoint..."),menu:[{id:S.DebugBreakpointsContext,group:"1_breakpoints",order:10,when:L.isEqualTo("functionBreakpoint")}]})}runInView(o,e,t){e.renderInputBox({breakpoint:t,type:"name"})}});N(class extends Ve{constructor(){super({id:"debug.editFunctionBreakpointHitCount",viewId:Q,title:c("editHitCount","Edit Hit Count..."),precondition:Pe,menu:[{id:S.DebugBreakpointsContext,group:"navigation",order:20,when:L.isEqualTo("functionBreakpoint")}]})}runInView(o,e,t){e.renderInputBox({breakpoint:t,type:"hitCount"})}});async function Wi(o){const e=o.get(J),t=o.get(g),i=o.get(R),n=t.getModel().getSessions(!1),s=o.get(gi),a=o.get(it),r=o.get(X),d=new rt,u=e.createQuickPick();d.add(u),u.matchOnLabel=u.matchOnDescription=u.matchOnDetail=u.sortByLabel=!1,u.placeholder=c("moveFocusedView.selectView","Search loaded scripts by name"),u.items=await $e(u.value,n,i,s,a,r),d.add(u.onDidChangeValue(async()=>{u.items=await $e(u.value,n,i,s,a,r)})),d.add(u.onDidAccept(()=>{u.selectedItems[0].accept(),u.hide(),d.dispose()})),u.show()}async function ji(o,e,t,i,n,s){const a=[];return a.push({type:"separator",label:o.name}),(await o.getLoadedSources()).forEach(d=>{const u=zi(d,e,t,i,n,s);u&&a.push(u)}),a}async function $e(o,e,t,i,n,s){const a=[],r=await Promise.all(e.map(d=>ji(d,o,t,i,n,s)));for(const d of r)for(const u of d)a.push(u);return a}function zi(o,e,t,i,n,s){const a=s.getUriBasenameLabel(o.uri),r=s.getUriLabel(nt(o.uri)),d=Te(e,a,!0),u=Te(e,r,!0);if(d||u)return{label:a,description:r==="."?void 0:r,highlights:{label:d??void 0,description:u??void 0},iconClasses:fi(i,n,o.uri),accept:()=>{o.available&&o.openInEditor(t,{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0})}}}async function Xi(o,e){const t=o.get(J),i=o.get(g),n=o.get(Ue),s=o.get(bi),a=new rt,r=t.createQuickPick();a.add(r),r.matchOnLabel=r.matchOnDescription=r.matchOnDetail=r.sortByLabel=!1,r.placeholder=c("moveFocusedView.selectView","Search debug sessions by name");const d=Qe(r.value,e,i,n,s);r.items=d.picks,r.activeItems=d.activeItems,a.add(r.onDidChangeValue(async()=>{r.items=Qe(r.value,e,i,n,s).picks})),a.add(r.onDidAccept(()=>{r.selectedItems[0].accept(),r.hide(),a.dispose()})),r.show()}function Qe(o,e,t,i,n){const s=[],a=[],r=t.getViewModel().focusedSession,d=t.getModel().getSessions(!1),u=[];d.forEach(b=>{b.compact&&b.parentSession&&a.push(b.parentSession)}),d.forEach(b=>{const C=a.includes(b);if(b.parentSession||s.push({type:"separator",label:C?b.name:void 0}),!C){const _=Yi(b,o,t,i);_&&(s.push(_),b.getId()===(r==null?void 0:r.getId())&&u.push(_))}}),s.length&&s.push({type:"separator"});const p=c("workbench.action.debug.startDebug","Start a New Debug Session");return s.push({label:`$(plus) ${p}`,ariaLabel:p,accept:()=>n.executeCommand(e)}),{picks:s,activeItems:u}}function Ji(o){var s;const e=o.configuration.name.length?o.configuration.name:o.name,t=o.compact||(s=o.parentSession)==null?void 0:s.configuration.name;let i="",n="";return t&&(n=c("workbench.action.debug.spawnFrom","Session {0} spawned from {1}",e,t),i=t),{label:e,description:i,ariaLabel:n}}function Yi(o,e,t,i,n){const s=Ji(o),a=Te(e,s.label,!0);if(a)return{label:s.label,description:s.description,ariaLabel:s.ariaLabel,highlights:{label:a},accept:()=>{t.focusStackFrame(void 0,void 0,o,{explicit:!0}),i.isViewVisible(oe)||i.openView(oe,!0)}}}const Bs="debug.addConfiguration",Et="editor.debug.action.toggleInlineBreakpoint",$i="debug.copyStackTrace",Qi="workbench.action.debug.reverseContinue",Zi="workbench.action.debug.stepBack",en="workbench.action.debug.restart",tn="workbench.action.debug.terminateThread",nn="workbench.action.debug.stepOver",sn="workbench.action.debug.stepInto",on="workbench.action.debug.stepIntoTarget",an="workbench.action.debug.stepOut",rn="workbench.action.debug.pause",cn="workbench.action.debug.disconnect",dn="workbench.action.debug.disconnectAndSuspend",un="workbench.action.debug.stop",ln="workbench.action.debug.restartFrame",hn="workbench.action.debug.continue",pn="workbench.debug.action.focusRepl",xt="debug.jumpToCursor",gn="workbench.action.debug.focusProcess",_t="workbench.action.debug.selectandstart",fn="workbench.action.debug.selectDebugConsole",bn="workbench.action.debug.selectDebugSession",ws="workbench.action.debug.configure",Ds="workbench.action.debug.start",mn="debug.renameWatchExpression",kn="debug.setWatchExpression",Sn="debug.removeWatchExpression",vn="workbench.action.debug.nextConsole",In="workbench.action.debug.prevConsole",Cn="workbench.action.debug.showLoadedScripts",Bn="workbench.action.debug.callStackTop",wn="workbench.action.debug.callStackBottom",Dn="workbench.action.debug.callStackUp",yn="workbench.action.debug.callStackDown",Tt={original:"Debug",value:c("debug","Debug")},ys={value:c("restartDebug","Restart"),original:"Restart"},Es={value:c("stepOverDebug","Step Over"),original:"Step Over"},xs={value:c("stepIntoDebug","Step Into"),original:"Step Into"},_s={value:c("stepIntoTargetDebug","Step Into Target"),original:"Step Into Target"},Ts={value:c("stepOutDebug","Step Out"),original:"Step Out"},As={value:c("pauseDebug","Pause"),original:"Pause"},Ns={value:c("disconnect","Disconnect"),original:"Disconnect"},Os={value:c("disconnectSuspend","Disconnect and Suspend"),original:"Disconnect and Suspend"},Ls={value:c("stop","Stop"),original:"Stop"},Rs={value:c("continueDebug","Continue"),original:"Continue"},Fs={value:c("focusSession","Focus Session"),original:"Focus Session"},Ms={value:c("selectAndStartDebugging","Select and Start Debugging"),original:"Select and Start Debugging"},Vs=c("openLaunchJson","Open '{0}'","launch.json"),Ps={value:c("nextDebugConsole","Focus Next Debug Console"),original:"Focus Next Debug Console"},Us={value:c("prevDebugConsole","Focus Previous Debug Console"),original:"Focus Previous Debug Console"},Hs={value:c("openLoadedScript","Open Loaded Script..."),original:"Open Loaded Script..."},Ks={value:c("callStackTop","Navigate to Top of Call Stack"),original:"Navigate to Top of Call Stack"},qs={value:c("callStackBottom","Navigate to Bottom of Call Stack"),original:"Navigate to Bottom of Call Stack"},Gs={value:c("callStackUp","Navigate Up Call Stack"),original:"Navigate Up Call Stack"},Ws={value:c("callStackDown","Navigate Down Call Stack"),original:"Navigate Down Call Stack"},js={value:c("selectDebugConsole","Select Debug Console"),original:"Select Debug Console"},zs={value:c("selectDebugSession","Select Debug Session"),original:"Select Debug Session"},En="debug ",xn="debug consoles ";function _n(o){return o&&typeof o.sessionId=="string"&&typeof o.threadId=="string"}async function x(o,e,t){const i=o.get(g);let n;if(_n(e)){const s=i.getModel().getSession(e.sessionId);s&&(n=s.getAllThreads().find(a=>a.getId()===e.threadId))}else if(Ke(e)){const s=i.getModel().getSession(e.sessionId);if(s){const a=s.getAllThreads();n=a.length>0?a[0]:void 0}}if(!n&&(n=i.getViewModel().focusedThread,!n)){const s=i.getViewModel().focusedSession,a=s?s.getAllThreads():void 0;n=a&&a.length?a[0]:void 0}n&&await t(n)}function Tn(o){return o&&typeof o.sessionId=="string"&&typeof o.threadId=="string"&&typeof o.frameId=="string"}function At(o,e){if(Tn(e)){const t=o.getModel().getSession(e.sessionId);if(t){const i=t.getAllThreads().find(n=>n.getId()===e.threadId);if(i)return i.getCallStack().find(n=>n.getId()===e.frameId)}}else return o.getViewModel().focusedStackFrame}function Ke(o){return o&&typeof o.sessionId=="string"}async function Nt(o,e){const t=o.get(g),i=o.get(Ue),n=t.getModel().getSessions(!0).filter(r=>r.hasSeparateRepl());let s=t.getViewModel().focusedSession,a=0;if(n.length>0&&s){for(;s&&!s.hasSeparateRepl();)s=s.parentSession;if(s){const r=n.indexOf(s);e?a=r===n.length-1?0:r+1:a=r===0?n.length-1:r-1}}await t.focusStackFrame(void 0,void 0,n[a],{explicit:!0}),i.isViewVisible(oe)||await i.openView(oe,!0)}async function Ot(o,e){const t=o.getViewModel().focusedStackFrame;if(t){let i=t.thread.getCallStack(),n=i.findIndex(a=>a.frameId===t.frameId),s;if(e){if(n>=i.length-1)if(t.thread.reachedEndOfCallStack){Rt(o);return}else await o.getModel().fetchCallstack(t.thread,20),i=t.thread.getCallStack(),n=i.findIndex(a=>a.frameId===t.frameId);s=Le(!0,i,n)}else{if(n<=0){Lt(o);return}s=Le(!1,i,n)}s&&o.focusStackFrame(s)}}async function Lt(o){const e=o.getViewModel().focusedThread;if(e){await o.getModel().fetchCallstack(e);const t=e.getCallStack();if(t.length>0){const i=Le(!1,t,0);i&&o.focusStackFrame(i)}}}function Rt(o){const e=o.getViewModel().focusedThread;e&&o.focusStackFrame(e.getTopStackFrame())}function Le(o,e,t){t>=e.length?t=e.length-1:t<0&&(t=0);let i=t,n;do if(o?i===e.length-1?i=0:i++:i===0?i=e.length-1:i--,n=e[i],!(n.source.presentationHint==="deemphasize"||n.presentationHint==="deemphasize"))return n;while(i!==t)}v.registerCommand({id:$i,handler:async(o,e,t)=>{const i=o.get(mi),n=o.get(ki),s=o.get(g),a=At(s,t);if(a){const r=i.getEOL(a.source.uri);await n.writeText(a.thread.getCallStack().map(d=>d.toString()).join(r))}}});v.registerCommand({id:Qi,handler:async(o,e,t)=>{await x(o,t,i=>i.reverseContinue())}});v.registerCommand({id:Zi,handler:async(o,e,t)=>{const i=o.get(ue);Ee.getValue(i)?await x(o,t,n=>n.stepBack("instruction")):await x(o,t,n=>n.stepBack())}});v.registerCommand({id:tn,handler:async(o,e,t)=>{await x(o,t,i=>i.terminate())}});v.registerCommand({id:xt,handler:async o=>{const t=o.get(g).getViewModel().focusedStackFrame,n=o.get(R).activeTextEditorControl,s=o.get(ct),a=o.get(J);if(t&&le(n)&&n.hasModel()){const r=n.getPosition(),d=n.getModel().uri,u=t.thread.session.getSourceForUri(d);if(u){const p=await t.thread.session.gotoTargets(u.raw,r.lineNumber,r.column),b=p==null?void 0:p.body.targets;if(b&&b.length){let C=b[0].id;if(b.length>1){const _=b.map(H=>({label:H.label,_id:H.id})),U=await a.pick(_,{placeHolder:c("chooseLocation","Choose the specific location")});if(!U)return;C=U._id}return await t.thread.session.goto(t.thread.threadId,C).catch(_=>s.warn(_))}}}return s.warn(c("noExecutableCode","No executable code is associated at the current cursor position."))}});v.registerCommand({id:Bn,handler:async(o,e,t)=>{const i=o.get(g);Rt(i)}});v.registerCommand({id:wn,handler:async(o,e,t)=>{const i=o.get(g);await Lt(i)}});v.registerCommand({id:Dn,handler:async(o,e,t)=>{const i=o.get(g);Ot(i,!1)}});v.registerCommand({id:yn,handler:async(o,e,t)=>{const i=o.get(g);Ot(i,!0)}});dt.appendMenuItem(S.EditorContext,{command:{id:xt,title:c("jumpToCursor","Jump to Cursor"),category:Tt},when:B.and(Ti,we.editorTextFocus),group:"debug",order:3});I.registerCommandAndKeybindingRule({id:vn,weight:200+1,when:gt,primary:2060,mac:{primary:3166},handler:async(o,e,t)=>{Nt(o,!0)}});I.registerCommandAndKeybindingRule({id:In,weight:200+1,when:gt,primary:2059,mac:{primary:3164},handler:async(o,e,t)=>{Nt(o,!1)}});I.registerCommandAndKeybindingRule({id:en,weight:200,primary:3135,when:Z,handler:async(o,e,t)=>{const i=o.get(g),n=o.get(Re);let s;if(Ke(t)?s=i.getModel().getSession(t.sessionId):s=i.getViewModel().focusedSession,s){const a=n.getValue("debug").showSubSessionsInToolBar;for(;!a&&s.lifecycleManagedByParent&&s.parentSession;)s=s.parentSession;s.removeReplExpressions(),await i.restartSession(s)}else{const{launch:a,name:r}=i.getConfigurationManager().selectedConfiguration;await i.startDebugging(a,r,{noDebug:!1,startedByUser:!0})}}});I.registerCommandAndKeybindingRule({id:nn,weight:200,primary:68,secondary:ut?[580]:void 0,when:ee.isEqualTo("stopped"),handler:async(o,e,t)=>{const i=o.get(ue);Ee.getValue(i)?await x(o,t,n=>n.next("instruction")):await x(o,t,n=>n.next())}});const Ft=ut&&vi?581:69;I.registerCommandAndKeybindingRule({id:sn,weight:200+10,primary:Ft,when:ee.notEqualsTo("inactive"),handler:async(o,e,t)=>{const i=o.get(ue);Ee.getValue(i)?await x(o,t,n=>n.stepIn("instruction")):await x(o,t,n=>n.stepIn())}});I.registerCommandAndKeybindingRule({id:an,weight:200,primary:1093,when:ee.isEqualTo("stopped"),handler:async(o,e,t)=>{const i=o.get(ue);Ee.getValue(i)?await x(o,t,n=>n.stepOut("instruction")):await x(o,t,n=>n.stepOut())}});I.registerCommandAndKeybindingRule({id:rn,weight:200+2,primary:64,when:ee.isEqualTo("running"),handler:async(o,e,t)=>{await x(o,t,i=>i.pause())}});I.registerCommandAndKeybindingRule({id:on,primary:Ft|2048,when:B.and(Ai,Z,ee.isEqualTo("stopped")),weight:200,handler:async(o,e,t)=>{const i=o.get(J),n=o.get(g),s=n.getViewModel().focusedSession,a=n.getViewModel().focusedStackFrame;if(!a||!s)return;const r=await o.get(R).openEditor({resource:a.source.uri,options:{revealIfOpened:!0}});let d;if(r){const p=r==null?void 0:r.getControl();le(p)&&(d=p)}const u=i.createQuickPick();u.busy=!0,u.show(),u.onDidChangeActive(([p])=>{d&&p&&p.target.line!==void 0&&(d.revealLineInCenterIfOutsideViewport(p.target.line),d.setSelection({startLineNumber:p.target.line,startColumn:p.target.column||1,endLineNumber:p.target.endLine||p.target.line,endColumn:p.target.endColumn||p.target.column||1}))}),u.onDidAccept(()=>{u.activeItems.length&&s.stepIn(a.thread.threadId,u.activeItems[0].target.id)}),u.onDidHide(()=>u.dispose()),s.stepInTargets(a.frameId).then(p=>{u.busy=!1,p!=null&&p.length?u.items=p==null?void 0:p.map(b=>({target:b,label:b.label})):u.placeholder=c("editor.debug.action.stepIntoTargets.none","No step targets available")})}});async function qe(o,e,t,i,n){const s=o.get(g);let a;Ke(t)?a=s.getModel().getSession(t.sessionId):a=s.getViewModel().focusedSession;const d=o.get(Re).getValue("debug").showSubSessionsInToolBar;for(;!d&&a&&a.lifecycleManagedByParent&&a.parentSession;)a=a.parentSession;await s.stopSession(a,i,n)}I.registerCommandAndKeybindingRule({id:cn,weight:200,primary:1087,when:B.and(ft,Z),handler:(o,e,t)=>qe(o,e,t,!0)});v.registerCommand({id:dn,handler:(o,e,t)=>qe(o,e,t,!0,!0)});I.registerCommandAndKeybindingRule({id:un,weight:200,primary:1087,when:B.and(ft.toNegated(),Z),handler:(o,e,t)=>qe(o,e,t,!1)});v.registerCommand({id:ln,handler:async(o,e,t)=>{const i=o.get(g),n=o.get(ct),s=At(i,t);if(s)try{await s.restart()}catch(a){n.error(a)}}});I.registerCommandAndKeybindingRule({id:hn,weight:200+10,primary:63,when:ee.isEqualTo("stopped"),handler:async(o,e,t)=>{await x(o,t,i=>i.continue())}});v.registerCommand({id:Cn,handler:async o=>{await Wi(o)}});v.registerCommand({id:pn,handler:async o=>{await o.get(Ue).openView(oe,!0)}});v.registerCommand({id:"debug.startFromConfig",handler:async(o,e)=>{await o.get(g).startDebugging(void 0,e)}});v.registerCommand({id:gn,handler:async(o,e)=>{const t=o.get(g),i=o.get(R),n=t.getModel().getSessions().find(a=>a.parentSession===e&&a.state===2);n&&e.state!==2&&(e=n),await t.focusStackFrame(void 0,void 0,e,{explicit:!0});const s=t.getViewModel().focusedStackFrame;s&&await s.openInEditor(i,!0)}});v.registerCommand({id:_t,handler:async o=>{o.get(J).quickAccess.show(En)}});v.registerCommand({id:fn,handler:async o=>{o.get(J).quickAccess.show(xn)}});v.registerCommand({id:bn,handler:async o=>{Xi(o,_t)}});I.registerCommandAndKeybindingRule({id:"debug.toggleBreakpoint",weight:200+5,when:B.and(ye,Si.toNegated()),primary:10,handler:o=>{const e=o.get(Y),t=o.get(g),i=e.lastFocusedList;if(i instanceof Me){const n=i.getFocusedElements();n&&n.length&&t.enableOrDisableBreakpoints(!n[0].enabled,n[0])}}});I.registerCommandAndKeybindingRule({id:"debug.enableOrDisableBreakpoint",weight:200,primary:void 0,when:we.editorTextFocus,handler:o=>{const e=o.get(g),i=o.get(R).activeTextEditorControl;if(le(i)){const n=i.getModel();if(n){const s=i.getPosition();if(s){const a=e.getModel().getBreakpoints({uri:n.uri,lineNumber:s.lineNumber});a.length&&e.enableOrDisableBreakpoints(!a[0].enabled,a[0])}}}}});I.registerCommandAndKeybindingRule({id:mn,weight:200+5,when:bt,primary:60,mac:{primary:3},handler:(o,e)=>{const t=o.get(g);if(!(e instanceof D)){const n=o.get(Y).lastFocusedList;if(n){const s=n.getFocus();Array.isArray(s)&&s[0]instanceof D&&(e=s[0])}}e instanceof D&&t.getViewModel().setSelectedExpression(e,!1)}});v.registerCommand({id:kn,handler:async(o,e)=>{const t=o.get(g);(e instanceof D||e instanceof K)&&t.getViewModel().setSelectedExpression(e,!0)}});I.registerCommandAndKeybindingRule({id:"debug.setVariable",weight:200+5,when:Ni,primary:60,mac:{primary:3},handler:o=>{const e=o.get(Y),t=o.get(g),i=e.lastFocusedList;if(i){const n=i.getFocus();Array.isArray(n)&&n[0]instanceof K&&t.getViewModel().setSelectedExpression(n[0],!1)}}});I.registerCommandAndKeybindingRule({id:Sn,weight:200,when:B.and(bt,Oi.toNegated()),primary:20,mac:{primary:2049},handler:(o,e)=>{const t=o.get(g);if(e instanceof D){t.removeWatchExpressions(e.getId());return}const n=o.get(Y).lastFocusedList;if(n){let s=n.getFocus();if(Array.isArray(s)&&s[0]instanceof D){const a=n.getSelection();a&&a.indexOf(s[0])>=0&&(s=a),s.forEach(r=>t.removeWatchExpressions(r.getId()))}}}});I.registerCommandAndKeybindingRule({id:"debug.removeBreakpoint",weight:200,when:B.and(ye,pt.toNegated()),primary:20,mac:{primary:2049},handler:o=>{const e=o.get(Y),t=o.get(g),i=e.lastFocusedList;if(i instanceof Me){const n=i.getFocusedElements(),s=n.length?n[0]:void 0;s instanceof y?t.removeBreakpoints(s.getId()):s instanceof E?t.removeFunctionBreakpoints(s.getId()):s instanceof A&&t.removeDataBreakpoints(s.getId())}}});const An=o=>{const e=o.get(g),i=o.get(R).activeTextEditorControl;if(le(i)){const n=i.getPosition();if(n&&i.hasModel()&&e.canSetBreakpointsIn(i.getModel())){const s=i.getModel().uri;e.getModel().getBreakpoints({lineNumber:n.lineNumber,uri:s}).some(r=>r.sessionAgnosticData.column===n.column||!r.column&&n.column<=1)||e.addBreakpoints(s,[{lineNumber:n.lineNumber,column:n.column>1?n.column:void 0}])}}};I.registerCommandAndKeybindingRule({weight:200,primary:1091,when:we.editorTextFocus,id:Et,handler:An});dt.appendMenuItem(S.EditorContext,{command:{id:Et,title:c("addInlineBreakpoint","Add Inline Breakpoint"),category:Tt},when:B.and(Z,Li.toNegated(),we.editorTextFocus),group:"debug",order:1});I.registerCommandAndKeybindingRule({id:"debug.openBreakpointToSide",weight:200,when:ye,primary:2051,secondary:[515],handler:o=>{const t=o.get(Y).lastFocusedList;if(t instanceof Me){const i=t.getFocusedElements();if(i.length&&i[0]instanceof y)return He(i[0],!0,!1,!0,o.get(g),o.get(R))}}});export{Os as $,Bs as A,y as B,Rs as C,ws as D,w as E,E as F,hn as G,rn as H,O as I,cn as J,Ns as K,Ls as L,Vn as M,un as N,Es as O,As as P,nn as Q,xs as R,Rn as S,Fn as T,sn as U,K as V,Ts as W,an as X,Zi as Y,Qi as Z,dn as _,Vs as a,Is as a$,Qn as a0,gn as a1,ys as a2,en as a3,Fs as a4,Fi as a5,Pn as a6,gs as a7,xn as a8,_t as a9,Dn as aA,Ws as aB,yn as aC,ln as aD,$i as aE,mn as aF,kn as aG,Sn as aH,us as aI,Hn as aJ,Kn as aK,qn as aL,Gn as aM,Wn as aN,jn as aO,Ye as aP,zn as aQ,Tt as aR,Ps as aS,vn as aT,Us as aU,In as aV,Hs as aW,Cn as aX,js as aY,zs as aZ,bn as a_,He as aa,Mn as ab,Ri as ac,kt as ad,En as ae,ps as af,Ds as ag,mt as ah,Ss as ai,fs as aj,vs as ak,ks as al,bs as am,fn as an,tn as ao,_s as ap,on as aq,pn as ar,xt as as,Et as at,Ms as au,Ks as av,Bn as aw,qs as ax,wn as ay,Gs as az,j as b,ms as b0,A as c,hs as d,D as e,Xe as f,T as g,Xn as h,Jn as i,Vi as j,St as k,$n as l,Yn as m,te as n,ls as o,rs as p,es as q,ts as r,is as s,Zn as t,ns as u,ss as v,os as w,cs as x,ds as y,as as z};
