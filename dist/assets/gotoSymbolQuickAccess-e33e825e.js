var N=Object.defineProperty;var B=(h,e,t)=>e in h?N(h,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[e]=t;var k=(h,e,t)=>(B(h,typeof e!="symbol"?e+"":e,t),t);import{_ as M,h as c,af as x,y as F,a1 as D,aA as R,a5 as H,P as K,f5 as q,nf as Y,au as V}from"./index-5b71d1bd.js";import{hJ as U,aY as W,hV as X,iC as $,d_ as z,b8 as E,ue as j,tW as J,fM as Z,av as m,sh as ee,by as te,bx as ie,kn as oe,bh as O,f1 as _,jD as se,t$ as ne,f0 as P,hB as ae,ek as L,dq as re,uf as w,dt as ce,pI as de,e$ as le,aW as me,qU as ue,ug as C,ll as Se,kj as ge,aM as he,aC as ve,b6 as fe,b0 as T,aP as ye,bq as Ce,kw as Ie,tD as pe,kA as be}from"./vendor-332432be.js";const Ee="chat.action.askQuickQuestion";let v=class I extends j{get activeTextEditorControl(){return this.editorService.activeTextEditorControl}get defaultFilterValue(){if(this.configuration.preserveInput)return J.LAST}constructor(e,t,n,i,a,l,o,S,d,u,r,s,g,y){super({showAlias:!Z.isDefaultVariant(),noResultsPick:()=>({label:m("noCommandResults","No matching commands"),commandId:""})},i,a,l,o,S),this.editorService=e,this.menuService=t,this.extensionService=n,this.configurationService=d,this.editorGroupService=u,this.preferencesService=r,this.productService=s,this.semanticSimilarityService=g,this.chatService=y,this.extensionRegistrationRace=ee(this.extensionService.whenInstalledExtensionsRegistered(),800),this.useSemanticSimilarity=!1,this._register(d.onDidChangeConfiguration(Q=>this.updateOptions(Q))),this.updateOptions()}get configuration(){const e=this.configurationService.getValue().workbench.commandPalette;return{preserveInput:e.preserveInput,experimental:e.experimental}}updateOptions(e){var i;if(e&&!e.affectsConfiguration("workbench.commandPalette.experimental"))return;const t=this.configuration,n=t.experimental.suggestCommands&&((i=this.productService.commandPaletteSuggestedCommandIds)!=null&&i.length)?new Set(this.productService.commandPaletteSuggestedCommandIds):void 0;this.options.suggestedCommandIds=n,this.useSemanticSimilarity=t.experimental.useSemanticSimilarity}async getCommandPicks(e){return await this.extensionRegistrationRace,e.isCancellationRequested?[]:[...this.getCodeEditorCommandPicks(),...this.getGlobalCommandPicks()].map(t=>({...t,buttons:[{iconClass:te.asClassName(ie.gear),tooltip:m("configure keybinding","Configure Keybinding")}],trigger:()=>(this.preferencesService.openGlobalKeybindingSettings(!1,{query:`@command:${t.commandId}`}),oe.CLOSE_PICKER)}))}hasAdditionalCommandPicks(e,t){return!(!this.useSemanticSimilarity||e===""||t.isCancellationRequested||!this.semanticSimilarityService.isEnabled())}async getAdditionalCommandPicks(e,t,n,i){if(!this.hasAdditionalCommandPicks(n,i))return[];const a=e.map(s=>s.commandId);let l;try{await O(I.SEMANTIC_SIMILARITY_DEBOUNCE,i),l=await this.semanticSimilarityService.getSimilarityScore(n,a,i)}catch{return[]}if(i.isCancellationRequested)return[];const o=l.map((s,g)=>g).sort((s,g)=>l[g]-l[s]),S=new Set(t.map(s=>s.commandId)),d=new Array;let u=0;for(const s of o){if(l[s]<I.SEMANTIC_SIMILARITY_THRESHOLD||u===I.SEMANTIC_SIMILARITY_MAX_PICKS)break;const y=e[s];S.has(y.commandId)||(d.push(y),u++)}u&&d.unshift({type:"separator",label:m("semanticSimilarity","similar commands")}),(t.length||d.length)&&d.push({type:"separator"});const r=this.chatService.getProviderInfos()[0];return r&&d.push({label:m("askXInChat","Ask {0}: {1}",r.displayName,n),commandId:Ee,args:[n]}),d}getGlobalCommandPicks(){var a,l;const e=[],t=((a=this.editorService.activeEditorPane)==null?void 0:a.scopedContextKeyService)||this.editorGroupService.activeGroup.scopedContextKeyService,n=this.menuService.createMenu(_.CommandPalette,t),i=n.getActions().reduce((o,[,S])=>[...o,...S],[]).filter(o=>o instanceof se&&o.enabled);for(const o of i){let S=(typeof o.item.title=="string"?o.item.title:o.item.title.value)||o.item.id;const d=typeof o.item.category=="string"?o.item.category:(l=o.item.category)==null?void 0:l.value;d&&(S=m("commandWithCategory","{0}: {1}",d,S));const u=typeof o.item.title!="string"?o.item.title.original:void 0,r=d&&o.item.category&&typeof o.item.category!="string"?o.item.category.original:void 0,s=u&&d?r?`${r}: ${u}`:`${d}: ${u}`:u;e.push({commandId:o.item.id,commandAlias:s,label:ne(S)})}return n.dispose(),e}};v.SEMANTIC_SIMILARITY_MAX_PICKS=3;v.SEMANTIC_SIMILARITY_THRESHOLD=.8;v.SEMANTIC_SIMILARITY_DEBOUNCE=200;v=M([c(0,x),c(1,U),c(2,F),c(3,W),c(4,X),c(5,$),c(6,z),c(7,D),c(8,E),c(9,R),c(10,H),c(11,K),c(12,q),c(13,Y)],v);class A extends P{constructor(){super({id:A.ID,title:{value:m("showTriggerActions","Show All Commands"),original:"Show All Commands"},keybinding:{weight:200,when:void 0,primary:ae?void 0:3118,secondary:[59]},f1:!0})}async run(e){e.get(L).quickAccess.show(v.PREFIX)}}A.ID="workbench.action.showCommands";class we extends P{constructor(){super({id:"workbench.action.clearCommandHistory",title:{value:m("clearCommandHistory","Clear Command History"),original:"Clear Command History"},f1:!0})}async run(e){const t=e.get(E),n=e.get(re),i=e.get(D);if(w.getConfiguredCommandHistoryLength(t)>0){const{confirmed:l}=await i.confirm({type:"warning",message:m("confirmClearMessage","Do you want to clear the history of recently used commands?"),detail:m("confirmClearDetail","This action is irreversible!"),primaryButton:m({key:"clearButtonLabel",comment:["&& denotes a mnemonic"]},"&&Clear")});if(!l)return;w.clearHistory(t,n)}}}let f=class G extends C{constructor(e,t,n,i,a,l){super(i,l,{openSideBySideDirection:()=>this.configuration.openSideBySideDirection}),this.editorService=e,this.editorGroupService=t,this.configurationService=n,this.outlineService=a,this.onDidActiveTextEditorControlChange=this.editorService.onDidActiveEditorChange}get configuration(){var t;const e=(t=this.configurationService.getValue().workbench)==null?void 0:t.editor;return{openEditorPinned:!(e!=null&&e.enablePreviewFromQuickOpen)||!(e!=null&&e.enablePreview),openSideBySideDirection:e==null?void 0:e.openSideBySideDirection}}get activeTextEditorControl(){var e;if(!Se((e=this.editorService.activeEditorPane)==null?void 0:e.getControl()))return this.editorService.activeTextEditorControl}gotoLocation(e,t){var n;if((t.keyMods.alt||this.configuration.openEditorPinned&&t.keyMods.ctrlCmd||t.forceSideBySide)&&this.editorService.activeEditor){(n=e.restoreViewState)==null||n.call(e);const i={selection:t.range,pinned:t.keyMods.ctrlCmd||this.configuration.openEditorPinned,preserveFocus:t.preserveFocus};this.editorGroupService.sideGroup.openEditor(this.editorService.activeEditor,i)}else super.gotoLocation(e,t)}async getSymbolPicks(e,t,n,i,a){return!await Promise.race([this.waitForLanguageSymbolRegistry(e,i),O(G.SYMBOL_PICKS_TIMEOUT)])||a.isCancellationRequested?[]:this.doGetSymbolPicks(this.getDocumentSymbols(e,a),ge(t),n,a)}provideWithoutTextEditor(e){return this.canPickWithOutlineService()?this.doGetOutlinePicks(e):super.provideWithoutTextEditor(e)}canPickWithOutlineService(){return this.editorService.activeEditorPane?this.outlineService.canCreateOutline(this.editorService.activeEditorPane):!1}doGetOutlinePicks(e){const t=this.editorService.activeEditorPane;if(!t)return he.None;const n=new ve,i=new fe;return i.add(T(()=>n.dispose(!0))),e.busy=!0,this.outlineService.createOutline(t,4,n.token).then(a=>{if(!a)return;if(n.token.isCancellationRequested){a.dispose();return}i.add(a);const l=a.captureViewState();i.add(T(()=>{e.selectedItems.length===0&&l.dispose()}));const o=a.config.quickPickDataSource.getQuickPickElements(),S=o.map((r,s)=>({kind:0,index:s,score:0,label:r.label,description:r.description,ariaLabel:r.ariaLabel,iconClasses:r.iconClasses}));i.add(e.onDidAccept(()=>{e.hide();const[r]=e.selectedItems;r&&o[r.index]&&a.reveal(o[r.index].element,{},!1)}));const d=()=>{const r=S.filter(s=>{if(e.value==="@")return s.score=0,s.highlights=void 0,!0;const g=pe(e.value,e.value.toLowerCase(),1,s.label,s.label.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return g?(s.score=g[1],s.highlights={label:be(g)},!0):!1});if(r.length===0){const s=m("empty","No matching entries");e.items=[{label:s,index:-1,kind:14}],e.ariaLabel=s}else e.items=r};d(),i.add(e.onDidChangeValue(d));const u=new ye;i.add(u),i.add(e.onDidChangeActive(()=>{const[r]=e.activeItems;r&&o[r.index]?u.value=a.preview(o[r.index].element):u.clear()}))}).catch(a=>{Ce(a),e.hide()}).finally(()=>{e.busy=!1}),i}};f.SYMBOL_PICKS_TIMEOUT=8e3;f=M([c(0,x),c(1,R),c(2,E),c(3,ce),c(4,V),c(5,de)],f);const b=class b extends P{constructor(){super({id:b.ID,title:{value:m("gotoSymbol","Go to Symbol in Editor..."),mnemonicTitle:m({key:"miGotoSymbolInEditor",comment:["&& denotes a mnemonic"]},"Go to &&Symbol in Editor..."),original:"Go to Symbol in Editor..."},f1:!0,keybinding:{when:void 0,weight:200,primary:3117},menu:[{id:_.MenubarGoMenu,group:"4_symbol_nav",order:1}]})}run(e){e.get(L).quickAccess.show(f.PREFIX,{itemActivation:Ie.NONE})}};k(b,"ID","workbench.action.gotoSymbol");let p=b;le(p);me.as(ue.Quickaccess).registerQuickAccessProvider({ctor:f,prefix:C.PREFIX,contextKey:"inFileSymbolsPicker",placeholder:m("gotoSymbolQuickAccessPlaceholder","Type the name of a symbol to go to."),helpEntries:[{description:m("gotoSymbolQuickAccess","Go to Symbol in Editor"),prefix:C.PREFIX,commandId:p.ID},{description:m("gotoSymbolByCategoryQuickAccess","Go to Symbol in Editor by Category"),prefix:C.PREFIX_BY_CATEGORY}]});export{v as C,f as G,A as S,we as a};
