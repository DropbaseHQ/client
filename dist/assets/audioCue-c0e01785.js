import{a5 as x,_ as k,h as f,iB as D,af as M,dr as A,eZ as N}from"./index-5b71d1bd.js";import{f0 as B,av as s,lG as w,ek as U,cc as H,lH as p,by as _,bx as O,aM as I,iW as b,s6 as W,b0 as q,aY as T,b8 as $,iE as z,b6 as Q,fR as F,s7 as K,j5 as v,iL as j,iK as G,j2 as Y,s8 as Z,s9 as J,sa as X,br as V,lR as ee,sb as ie,sc as se,aW as E,dm as ae,e$ as te,fu as oe,sd as ne}from"./vendor-332432be.js";var re={"vs/platform/audioCues/browser/media/break.mp3":new URL("/assets/break-6b46c048.mp3",self.location).href,"vs/platform/audioCues/browser/media/chatRequestSent.mp3":new URL("/assets/chatRequestSent-c2af78e9.mp3",self.location).href,"vs/platform/audioCues/browser/media/chatResponsePending.mp3":new URL("/assets/chatResponsePending-82dcf818.mp3",self.location).href,"vs/platform/audioCues/browser/media/chatResponseReceived1.mp3":new URL("/assets/chatResponseReceived1-d5076496.mp3",self.location).href,"vs/platform/audioCues/browser/media/chatResponseReceived2.mp3":new URL("/assets/chatResponseReceived2-3bbbf1e4.mp3",self.location).href,"vs/platform/audioCues/browser/media/chatResponseReceived3.mp3":new URL("/assets/chatResponseReceived3-dae8868f.mp3",self.location).href,"vs/platform/audioCues/browser/media/chatResponseReceived4.mp3":new URL("/assets/chatResponseReceived4-2e6b5f52.mp3",self.location).href,"vs/platform/audioCues/browser/media/diffLineDeleted.mp3":new URL("/assets/diffLineDeleted-576ba12f.mp3",self.location).href,"vs/platform/audioCues/browser/media/diffLineInserted.mp3":new URL("/assets/diffLineInserted-a5aae8f0.mp3",self.location).href,"vs/platform/audioCues/browser/media/diffLineModified.mp3":new URL("/assets/diffLineModified-314716c3.mp3",self.location).href,"vs/platform/audioCues/browser/media/error.mp3":new URL("/assets/error-b93c2a76.mp3",self.location).href,"vs/platform/audioCues/browser/media/foldedAreas.mp3":new URL("/assets/foldedAreas-a6b54171.mp3",self.location).href,"vs/platform/audioCues/browser/media/quickFixes.mp3":new URL("/assets/quickFixes-dc7d1e73.mp3",self.location).href,"vs/platform/audioCues/browser/media/taskCompleted.mp3":new URL("/assets/taskCompleted-f0dd8e18.mp3",self.location).href,"vs/platform/audioCues/browser/media/taskFailed.mp3":new URL("/assets/taskFailed-5494702a.mp3",self.location).href,"vs/platform/audioCues/browser/media/terminalBell.mp3":new URL("/assets/terminalBell-ff9df1e1.mp3",self.location).href,"vs/platform/audioCues/browser/media/warning.mp3":new URL("/assets/warning-2687e2e7.mp3",self.location).href};class y extends B{constructor(){super({id:y.ID,title:{value:s("audioCues.help","Help: List Audio Cues"),original:"Help: List Audio Cues"},f1:!0})}async run(o){const r=o.get(w),e=o.get(U),u=o.get(x),l=o.get(H),n=p.allAudioCues.map((a,t)=>({label:l.isScreenReaderOptimized()?`${a.name}${r.isEnabled(a)?"":" ("+s("disabled","Disabled")+")"}`:`${r.isEnabled(a)?"$(check)":"     "} ${a.name}`,audioCue:a,buttons:[{iconClass:_.asClassName(O.settingsGear),tooltip:s("audioCues.help.settings","Enable/Disable Audio Cue")}]}));await e.pick(n,{activeItem:n[0],onDidFocus:a=>{r.playSound(a.audioCue.sound,!0)},onDidTriggerItemButton:a=>{u.openSettings({query:a.item.audioCue.settingsKey})},placeHolder:s("audioCues.help.placeholder","Select an audio cue to play")})}}y.ID="audioCues.help";let R=class extends I{constructor(o,r){super(),this.audioCueService=r;const e=b(r.onEnabledChanged(p.onDebugBreak),()=>r.isEnabled(p.onDebugBreak));this._register(W((u,l)=>{if(!e.read(u))return;const n=new Map;l.add(q(()=>{n.forEach(i=>i.dispose()),n.clear()})),l.add(o.onDidNewSession(i=>n.set(i,this.handleSession(i)))),l.add(o.onDidEndSession(i=>{var a;(a=n.get(i))==null||a.dispose(),n.delete(i)})),o.getModel().getSessions().forEach(i=>n.set(i,this.handleSession(i)))},"subscribe to debug sessions"))}handleSession(o){return o.onDidChangeState(r=>{const e=o.getStoppedDetails(),u="breakpoint";e&&e.reason===u&&this.audioCueService.playAudioCue(p.onDebugBreak)})}};R=k([f(0,D),f(1,w)],R);let L=class extends I{constructor(o,r,e,u){super(),this.editorService=o,this.instantiationService=r,this.audioCueService=e,this._configurationService=u,this.store=this._register(new Q),this.features=[this.instantiationService.createInstance(S,p.error,F.Error),this.instantiationService.createInstance(S,p.warning,F.Warning),this.instantiationService.createInstance(de),this.instantiationService.createInstance(P)],this.isEnabledCache=new K(i=>b(this.audioCueService.onEnabledChanged(i),()=>this.audioCueService.isEnabled(i)));const l=v("someAudioCueFeatureIsEnabled",i=>this.features.some(a=>this.isEnabledCache.get(a.audioCue).read(i))),n=b(this.editorService.onDidActiveEditorChange,i=>{const a=this.editorService.activeTextEditorControl,t=j(a)?a.getOriginalEditor():G(a)?a:void 0;return t&&t.hasModel()?{editor:t,model:t.getModel()}:void 0});this._register(Y("updateAudioCuesEnabled",i=>{if(this.store.clear(),!l.read(i))return;const a=n.read(i);a&&this.registerAudioCuesForEditor(a.editor,a.model,this.store)}))}registerAudioCuesForEditor(o,r,e){const u=b(o.onDidChangeCursorPosition,t=>{if(!(t&&t.reason!==3&&t.reason!==0))return o.getPosition()}),l=Z(u,this._configurationService.getValue("audioCues.debouncePositionChanges")?300:0,e),n=J(r.onDidChangeContent.bind(r),1e3,e),i=this.features.map(t=>{const h=t.getObservableState(o,r),m=v(`isPresentInLine:${t.audioCue.name}`,c=>{if(!this.isEnabledCache.get(t.audioCue).read(c))return!1;const C=l.read(c);return C?h.read(c).isPresent(C):!1});return v(`typingDebouncedFeatureState:
${t.audioCue.name}`,c=>t.debounceWhileTyping&&n.read(c)?(l.read(c),m.get()):m.read(c))}),a=v("states",t=>({lineNumber:l.read(t),featureStates:new Map(this.features.map((h,m)=>[h,i[m].read(t)]))}));e.add(X("Play Audio Cue",a,({lastValue:t,newValue:h})=>{const m=this.features.filter(c=>{var C;return(h==null?void 0:h.featureStates.get(c))&&(!((C=t==null?void 0:t.featureStates)!=null&&C.get(c))||h.lineNumber!==t.lineNumber)});this.audioCueService.playAudioCues(m.map(c=>c.audioCue))}))}};L=k([f(0,M),f(1,T),f(2,w),f(3,$)],L);let S=class{constructor(o,r,e){this.audioCue=o,this.severity=r,this.markerService=e,this.debounceWhileTyping=!0,this._previousLine=0}getObservableState(o,r){return b(V.filter(this.markerService.onMarkerChanged,e=>e.some(u=>u.toString()===r.uri.toString())),()=>({isPresent:e=>{const u=e.lineNumber!==this._previousLine;return this._previousLine=e.lineNumber,this.markerService.read({resource:r.uri}).some(n=>{const i=n.severity===this.severity&&n.startLineNumber<=e.lineNumber&&e.lineNumber<=n.endLineNumber;return u?i:i&&e.lineNumber<=n.endLineNumber&&n.startColumn<=e.column&&n.endColumn>=e.column})}}))}};S=k([f(2,z)],S);class de{constructor(){this.audioCue=p.foldedArea}getObservableState(o,r){const e=ee.get(o);return e?se(e.getFoldingModel()??Promise.resolve(void 0)).map(l=>({isPresent:n=>{var t;const i=(t=l.value)==null?void 0:t.getRegionAtLine(n.lineNumber);return i?i.isCollapsed&&i.startLineNumber===n.lineNumber:!1}})):ie({isPresent:()=>!1})}}let P=class{constructor(o){this.debugService=o,this.audioCue=p.break}getObservableState(o,r){return b(this.debugService.getModel().onDidChangeBreakpoints,()=>({isPresent:e=>this.debugService.getModel().getBreakpoints({uri:r.uri,lineNumber:e.lineNumber}).length>0}))}};P=k([f(0,D)],P);E.as(A.Workbench).registerWorkbenchContribution(L,3);E.as(A.Workbench).registerWorkbenchContribution(R,3);const d={type:"string",enum:["auto","on","off"],default:"auto",enumDescriptions:[s("audioCues.enabled.auto","Enable audio cue when a screen reader is attached."),s("audioCues.enabled.on","Enable audio cue."),s("audioCues.enabled.off","Disable audio cue.")],tags:["accessibility"]};E.as(ae.Configuration).registerConfiguration({properties:{"audioCues.enabled":{markdownDeprecationMessage:"Deprecated. Use the specific setting for each audio cue instead (`audioCues.*`).",tags:["accessibility"]},"audioCues.volume":{description:s("audioCues.volume","The volume of the audio cues in percent (0-100)."),type:"number",minimum:0,maximum:100,default:70,tags:["accessibility"]},"audioCues.debouncePositionChanges":{description:s("audioCues.debouncePositionChanges","Whether or not position changes should be debounced"),type:"boolean",default:!1,tags:["accessibility"]},"audioCues.lineHasBreakpoint":{description:s("audioCues.lineHasBreakpoint","Plays a sound when the active line has a breakpoint."),...d},"audioCues.lineHasInlineSuggestion":{description:s("audioCues.lineHasInlineSuggestion","Plays a sound when the active line has an inline suggestion."),...d},"audioCues.lineHasError":{description:s("audioCues.lineHasError","Plays a sound when the active line has an error."),...d},"audioCues.lineHasFoldedArea":{description:s("audioCues.lineHasFoldedArea","Plays a sound when the active line has a folded area that can be unfolded."),...d},"audioCues.lineHasWarning":{description:s("audioCues.lineHasWarning","Plays a sound when the active line has a warning."),...d,default:"off"},"audioCues.onDebugBreak":{description:s("audioCues.onDebugBreak","Plays a sound when the debugger stopped on a breakpoint."),...d},"audioCues.noInlayHints":{description:s("audioCues.noInlayHints","Plays a sound when trying to read a line with inlay hints that has no inlay hints."),...d},"audioCues.taskCompleted":{description:s("audioCues.taskCompleted","Plays a sound when a task is completed."),...d},"audioCues.taskFailed":{description:s("audioCues.taskFailed","Plays a sound when a task fails (non-zero exit code)."),...d},"audioCues.terminalCommandFailed":{description:s("audioCues.terminalCommandFailed","Plays a sound when a terminal command fails (non-zero exit code)."),...d},"audioCues.terminalQuickFix":{description:s("audioCues.terminalQuickFix","Plays a sound when terminal Quick Fixes are available."),...d},"audioCues.diffLineInserted":{description:s("audioCues.diffLineInserted","Plays a sound when the focus moves to an inserted line in diff review mode or to the next/previous change"),...d},"audioCues.diffLineDeleted":{description:s("audioCues.diffLineDeleted","Plays a sound when the focus moves to a deleted line in diff review mode or to the next/previous change"),...d},"audioCues.diffLineModified":{description:s("audioCues.diffLineModified","Plays a sound when the focus moves to a modified line in diff review mode or to the next/previous change"),...d},"audioCues.notebookCellCompleted":{description:s("audioCues.notebookCellCompleted","Plays a sound when a notebook cell execution is successfully completed."),...d},"audioCues.notebookCellFailed":{description:s("audioCues.notebookCellFailed","Plays a sound when a notebook cell execution fails."),...d},"audioCues.chatRequestSent":{description:s("audioCues.chatRequestSent","Plays a sound when a chat request is made."),...d,default:"off"},"audioCues.chatResponsePending":{description:s("audioCues.chatResponsePending","Plays a sound on loop while the response is pending."),...d,default:"auto"},"audioCues.chatResponseReceived":{description:s("audioCues.chatResponseReceived","Plays a sound on loop while the response has been received."),...d,default:"off"}}});te(y);N(re);function me(){return{[w.toString()]:new oe(ne)}}export{me as default};
