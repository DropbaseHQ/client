var ae=Object.defineProperty;var ue=(t,e,i)=>e in t?ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var T=(t,e,i)=>(ue(t,typeof e!="symbol"?e+"":e,i),i);import{_ as E,h as s,N as de,af as le,aA as pe,x as ve,c7 as he,z as me,l2 as ge,l3 as ke,iB as we,M as Se,jg as B}from"./index-5b71d1bd.js";import{b8 as Y,aY as U,hV as G,c6 as j,cT as Ie,ec as ye,tp as be,e$ as h,aW as J,qU as Z,tq as ee,av as r,f0 as b,ek as l,kp as m,f1 as I,ex as fe,kw as ie,ki as Ce,c5 as Pe,jo as Ae,tr as Qe,fw as te,ts as L,hL as f,eH as xe,bH as X,fu as qe,fg as Ve,cQ as Ee,tt as Ne,l_ as Oe,bd as De}from"./vendor-332432be.js";import{I as Ke,i as k,g as N,d as ne}from"./quickaccess-f6b93953.js";import{C as Q,S as C,a as Re}from"./gotoSymbolQuickAccess-e33e825e.js";let M=class extends be{constructor(e,i,c,o,u,n,d){super(i,o,u,n),this.configurationService=e,this.keybindingService=c,this.hoverService=d,this.hoverDelegate=new Le(this.configurationService,this.hoverService),this.inQuickInputContext=Ke.bindTo(this.contextKeyService),this.registerListeners()}registerListeners(){this._register(this.onShow(()=>this.inQuickInputContext.set(!0))),this._register(this.onHide(()=>this.inQuickInputContext.set(!1)))}createController(){return super.createController(this.layoutService,{ignoreFocusOut:()=>!this.configurationService.getValue("workbench.quickOpen.closeOnFocusLost"),backKeybindingLabel:()=>{var e;return((e=this.keybindingService.lookupKeybinding("workbench.action.quickInputBack"))==null?void 0:e.getLabel())||void 0},hoverDelegate:this.hoverDelegate})}};M=E([s(0,Y),s(1,U),s(2,G),s(3,j),s(4,Ie),s(5,ye),s(6,de)],M);class Le{get delay(){return Date.now()-this.lastHoverHideTime<200?0:this.configurationService.getValue("workbench.hover.delay")}constructor(e,i){this.configurationService=e,this.hoverService=i,this.lastHoverHideTime=0,this.placement="element"}showHover(e,i){return this.hoverService.showHover({...e,showHoverHint:!0,hideOnKeyDown:!1,skipFadeInAnimation:!0},i)}onDidHideHover(){this.lastHoverHideTime=Date.now()}}let x=class extends ee{constructor(e,i,c){super(),this.editorService=e,this.editorGroupService=i,this.configurationService=c,this.onDidActiveTextEditorControlChange=this.editorService.onDidActiveEditorChange}get configuration(){var i;const e=(i=this.configurationService.getValue().workbench)==null?void 0:i.editor;return{openEditorPinned:!(e!=null&&e.enablePreviewFromQuickOpen)||!(e!=null&&e.enablePreview)}}get activeTextEditorControl(){return this.editorService.activeTextEditorControl}gotoLocation(e,i){var c;if((i.keyMods.alt||this.configuration.openEditorPinned&&i.keyMods.ctrlCmd||i.forceSideBySide)&&this.editorService.activeEditor){(c=e.restoreViewState)==null||c.call(e);const o={selection:i.range,pinned:i.keyMods.ctrlCmd||this.configuration.openEditorPinned,preserveFocus:i.preserveFocus};this.editorGroupService.sideGroup.openEditor(this.editorService.activeEditor,o)}else super.gotoLocation(e,i)}};x=E([s(0,le),s(1,pe),s(2,Y)],x);const V=class V extends b{constructor(){super({id:V.ID,title:{value:r("gotoLine","Go to Line/Column..."),original:"Go to Line/Column..."},f1:!0,keybinding:{weight:200,when:null,primary:2085,mac:{primary:293}}})}async run(e){e.get(l).quickAccess.show(x.PREFIX)}};T(V,"ID","workbench.action.gotoLine");let q=V;h(q);J.as(Z.Quickaccess).registerQuickAccessProvider({ctor:x,prefix:ee.PREFIX,placeholder:r("gotoLineQuickAccessPlaceholder","Type the line number and optional column to go to (e.g. 42:5 for line 42 and column 5)."),helpEntries:[{description:r("gotoLineQuickAccess","Go to Line/Column"),commandId:q.ID}]});const g={primary:2094,secondary:[2083],mac:{primary:2094,secondary:void 0}};m.registerCommandAndKeybindingRule({id:"workbench.action.closeQuickOpen",weight:200,when:k,primary:9,secondary:[1033],handler:t=>t.get(l).cancel()});m.registerCommandAndKeybindingRule({id:"workbench.action.acceptSelectedQuickOpenItem",weight:200,when:k,primary:0,handler:t=>t.get(l).accept()});m.registerCommandAndKeybindingRule({id:"workbench.action.alternativeAcceptSelectedQuickOpenItem",weight:200,when:k,primary:0,handler:t=>t.get(l).accept({ctrlCmd:!0,alt:!1})});m.registerCommandAndKeybindingRule({id:"workbench.action.focusQuickOpen",weight:200,when:k,primary:0,handler:t=>{t.get(l).focus()}});const _="workbench.action.quickOpenNavigateNextInFilePicker";m.registerCommandAndKeybindingRule({id:_,weight:200+50,handler:N(_,!0),when:ne,primary:g.primary,secondary:g.secondary,mac:g.mac});const z="workbench.action.quickOpenNavigatePreviousInFilePicker";m.registerCommandAndKeybindingRule({id:z,weight:200+50,handler:N(z,!1),when:ne,primary:g.primary|1024,secondary:[g.secondary[0]|1024],mac:{primary:g.mac.primary|1024,secondary:void 0}});m.registerCommandAndKeybindingRule({id:"workbench.action.quickPickManyToggle",weight:200,when:k,primary:0,handler:t=>{t.get(l).toggle()}});m.registerCommandAndKeybindingRule({id:"workbench.action.quickInputBack",weight:200+50,when:k,primary:0,win:{primary:527},mac:{primary:344},linux:{primary:2648},handler:t=>{t.get(l).back()}});h(class extends b{constructor(){super({id:"workbench.action.quickOpen",title:{value:r("quickOpen","Go to File..."),original:"Go to File..."},description:{description:"Quick access",args:[{name:"prefix",schema:{type:"string"}}]},keybinding:{weight:200,primary:g.primary,secondary:g.secondary,mac:g.mac},f1:!0})}run(e,i){e.get(l).quickAccess.show(typeof i=="string"?i:void 0,{preserveValue:typeof i=="string"})}});h(class extends b{constructor(){super({id:"workbench.action.quickOpenWithModes",title:r("quickOpenWithModes","Quick Open"),menu:{id:I.CommandCenter,order:100}})}run(e){e.get(l).quickAccess.show(void 0,{preserveValue:!0,providerOptions:{includeHelp:!0,from:"commandCenter"}})}});fe.registerCommand("workbench.action.quickOpenPreviousEditor",async t=>{t.get(l).quickAccess.show("",{itemActivation:ie.SECOND})});class O extends b{constructor(e,i,c,o,u){super({id:e,title:i,f1:!0,keybinding:u}),this.id=e,this.next=c,this.quickNavigate=o}async run(e){const i=e.get(G),c=e.get(l),o=i.lookupKeybindings(this.id),u=this.quickNavigate?{keybindings:o}:void 0;c.navigate(this.next,u)}}class Me extends O{constructor(){super("workbench.action.quickOpenNavigateNext",{value:r("quickNavigateNext","Navigate Next in Quick Open"),original:"Navigate Next in Quick Open"},!0,!0)}}class Fe extends O{constructor(){super("workbench.action.quickOpenNavigatePrevious",{value:r("quickNavigatePrevious","Navigate Previous in Quick Open"),original:"Navigate Previous in Quick Open"},!1,!0)}}class Ge extends O{constructor(){super("workbench.action.quickOpenSelectNext",{value:r("quickSelectNext","Select Next in Quick Open"),original:"Select Next in Quick Open"},!0,!1,{weight:200+50,when:k,primary:0,mac:{primary:300}})}}class He extends O{constructor(){super("workbench.action.quickOpenSelectPrevious",{value:r("quickSelectPrevious","Select Previous in Quick Open"),original:"Select Previous in Quick Open"},!1,!1,{weight:200+50,when:k,primary:0,mac:{primary:302}})}}h(Ge);h(He);h(Me);h(Fe);let S=class re extends Ce{constructor(e,i,c,o,u,n,d,a){super(re.PREFIX,{noResultsPick:{label:r("noViewResults","No matching views"),containerLabel:""}}),this.viewDescriptorService=e,this.viewsService=i,this.outputService=c,this.terminalService=o,this.terminalGroupService=u,this.debugService=n,this.paneCompositeService=d,this.contextKeyService=a}_getPicks(e){const i=this.doGetViewPickItems().filter(n=>e?(n.highlights={label:Pe(Ae(e,n.label,!0))},n.highlights.label||Qe(n.containerLabel,e)):!0),c=new Map;for(const n of i)c.has(n.label)||c.set(n.label,n.containerLabel);const o=[];let u;for(const n of i){if(u!==n.containerLabel){u=n.containerLabel;let d;c.has(u)?d=`${c.get(u)} / ${u}`:d=u,o.push({type:"separator",label:d})}o.push(n)}return o}doGetViewPickItems(){const e=[],i=(n,d)=>{const a=this.viewDescriptorService.getViewContainerModel(d),p=[];for(const v of a.allViewDescriptors)this.contextKeyService.contextMatchesRules(v.when)&&p.push({label:v.name,containerLabel:a.title,accept:()=>this.viewsService.openView(v.id,!0)});return p},c=(n,d)=>{const a=this.paneCompositeService.getPaneComposites(n),p=this.paneCompositeService.getVisiblePaneCompositeIds(n);a.sort((v,A)=>{let D=p.findIndex(R=>v.id===R),K=p.findIndex(R=>A.id===R);return D<0&&(D=a.indexOf(v)+p.length),K<0&&(K=a.indexOf(A)+p.length),D-K});for(const v of a)if(this.includeViewContainer(v)){const A=this.viewDescriptorService.getViewContainerById(v.id);A&&e.push({label:this.viewDescriptorService.getViewContainerModel(A).title,containerLabel:d,accept:()=>this.paneCompositeService.openPaneComposite(v.id,n,!0)})}};c(0,r("views","Side Bar")),c(1,r("panels","Panel")),c(2,r("secondary side bar","Secondary Side Bar"));const o=n=>{const d=this.paneCompositeService.getPaneComposites(n);for(const a of d){const p=this.viewDescriptorService.getViewContainerById(a.id);p&&e.push(...i(a,p))}};o(0),o(1),o(2),this.terminalGroupService.groups.forEach((n,d)=>{n.terminalInstances.forEach((a,p)=>{const v=r("terminalTitle","{0}: {1}",`${d+1}.${p+1}`,a.title);e.push({label:v,containerLabel:r("terminals","Terminal"),accept:async()=>{await this.terminalGroupService.showPanel(!0),this.terminalService.setActiveInstance(a)}})})}),this.debugService.getModel().getSessions(!0).filter(n=>n.hasSeparateRepl()).forEach((n,d)=>{const a=n.name;e.push({label:a,containerLabel:r("debugConsoles","Debug Console"),accept:async()=>{await this.debugService.focusStackFrame(void 0,void 0,n,{explicit:!0}),this.viewsService.isViewVisible(B)||await this.viewsService.openView(B,!0)}})});const u=this.outputService.getChannelDescriptors();for(const n of u)e.push({label:n.label,containerLabel:r("channels","Output"),accept:()=>this.outputService.showChannel(n.id)});return e}includeViewContainer(e){const i=this.viewDescriptorService.getViewContainerById(e.id);return i!=null&&i.hideIfEmpty?this.viewDescriptorService.getViewContainerModel(i).activeViewDescriptors.length>0:!0}};S.PREFIX="view ";S=E([s(0,ve),s(1,he),s(2,me),s(3,ge),s(4,ke),s(5,we),s(6,Se),s(7,j)],S);class P extends b{constructor(){super({id:P.ID,title:{value:r("openView","Open View"),original:"Open View"},category:te.View,f1:!0})}async run(e){e.get(l).quickAccess.show(S.PREFIX)}}P.ID="workbench.action.openView";class w extends b{constructor(){super({id:w.ID,title:{value:r("quickOpenView","Quick Open View"),original:"Quick Open View"},category:te.View,f1:!1,keybinding:{weight:200,when:void 0,...w.KEYBINDING}})}async run(e){const i=e.get(G),c=e.get(l),o=i.lookupKeybindings(w.ID);c.quickAccess.show(S.PREFIX,{quickNavigateConfiguration:{keybindings:o},itemActivation:ie.FIRST})}}w.ID="workbench.action.quickOpenView";w.KEYBINDING={primary:2095,mac:{primary:303},linux:{primary:0}};const H=J.as(Z.Quickaccess);H.registerQuickAccessProvider({ctor:L,prefix:L.PREFIX,placeholder:r("helpQuickAccessPlaceholder","Type '{0}' to get help on the actions you can take from here.",L.PREFIX),helpEntries:[{description:r("helpQuickAccess","Show all Quick Access Providers")}]});H.registerQuickAccessProvider({ctor:S,prefix:S.PREFIX,contextKey:"inViewsPicker",placeholder:r("viewQuickAccessPlaceholder","Type the name of a view, output channel or terminal to open."),helpEntries:[{description:r("viewQuickAccess","Open View"),commandId:P.ID}]});H.registerQuickAccessProvider({ctor:Q,prefix:Q.PREFIX,contextKey:"inCommandsPicker",placeholder:r("commandsQuickAccessPlaceholder","Type the name of a command to run."),helpEntries:[{description:r("commandsQuickAccess","Show and Run Commands"),commandId:C.ID}]});f.appendMenuItem(I.MenubarViewMenu,{group:"1_open",command:{id:C.ID,title:r({key:"miCommandPalette",comment:["&& denotes a mnemonic"]},"&&Command Palette...")},order:1});f.appendMenuItem(I.MenubarHelpMenu,{group:"1_welcome",command:{id:C.ID,title:r({key:"miShowAllCommands",comment:["&& denotes a mnemonic"]},"Show All Commands")},order:2});f.appendMenuItem(I.MenubarViewMenu,{group:"1_open",command:{id:P.ID,title:r({key:"miOpenView",comment:["&& denotes a mnemonic"]},"&&Open View...")},order:2});f.appendMenuItem(I.MenubarGoMenu,{group:"5_infile_nav",command:{id:"workbench.action.gotoLine",title:r({key:"miGotoLine",comment:["&& denotes a mnemonic"]},"Go to &&Line/Column...")},order:1});f.appendMenuItem(I.GlobalActivity,{group:"1_command",command:{id:C.ID,title:r("commandPalette","Command Palette...")},order:1});f.appendMenuItem(I.EditorContext,{group:"z_commands",when:xe.editorSimpleInput.toNegated(),command:{id:C.ID,title:r("commandPalette","Command Palette...")},order:1});h(Re);h(C);h(P);h(w);const Te="inViewsPicker",ce=X.and(k,X.has(Te)),y=w.KEYBINDING,$="workbench.action.quickOpenNavigateNextInViewPicker";m.registerCommandAndKeybindingRule({id:$,weight:200+50,handler:N($,!0),when:ce,primary:y.primary,linux:y.linux,mac:y.mac});const W="workbench.action.quickOpenNavigatePreviousInViewPicker";m.registerCommandAndKeybindingRule({id:W,weight:200+50,handler:N(W,!1),when:ce,primary:y.primary|1024,linux:y.linux,mac:{primary:y.mac.primary|1024}});let oe=()=>!0,se=()=>!0;const Be=Q.prototype.getCommandPicks;Q.prototype.getCommandPicks=async function(t){let e=await Be.call(this,t);return oe()||(e=e.map(i=>{var c;return{...i,buttons:(c=i.buttons)==null?void 0:c.filter(o=>o.tooltip!=="Configure Keybinding")}})),e};let F=class{constructor(e){this.instantiationService=e,this.workbenchQuickInputService=e.createInstance(M)}get activeService(){return!(Ve.get(Ee).getFocusedCodeEditor()instanceof Ne)&&se()?this.workbenchQuickInputService:(this.standaloneQuickInputService??(this.standaloneQuickInputService=this.instantiationService.createInstance(Oe)),this.standaloneQuickInputService)}get quickAccess(){return this.activeService.quickAccess}get backButton(){return this.activeService.backButton}get onShow(){return this.activeService.onShow}get onHide(){return this.activeService.onHide}pick(e,i={},c=De.None){return this.activeService.pick(e,i,c)}input(e,i){return this.activeService.input(e,i)}createQuickPick(){return this.activeService.createQuickPick()}createInputBox(){return this.activeService.createInputBox()}focus(){return this.activeService.focus()}toggle(){return this.activeService.toggle()}navigate(e,i){return this.activeService.navigate(e,i)}accept(){return this.activeService.accept()}back(){return this.activeService.back()}cancel(){return this.activeService.cancel()}};F=E([s(0,U)],F);function ei({isKeybindingConfigurationVisible:t,shouldUseGlobalPicker:e}={}){return t!=null&&(oe=t),e!=null&&(se=e),{[l.toString()]:new qe(F)}}export{ei as default};
